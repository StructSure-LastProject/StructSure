(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const xr=!1,vr=(e,t)=>e===t,Bt=Symbol("solid-proxy"),Rn=typeof Proxy=="function",yr=Symbol("solid-track"),Xt={equals:vr};let zn=Hn;const ot=1,Yt=2,qn={owned:null,cleanups:null,context:null,owner:null},nn={};var ie=null;let rn=null,wr=null,ue=null,Ee=null,it=null,Ht=0;function It(e,t){const n=ue,l=ie,r=e.length===0,s=t===void 0?l:t,a=r?qn:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=r?e:()=>e(()=>Ne(()=>Et(a)));ie=a,ue=null;try{return Ke(i,!0)}finally{ue=n,ie=l}}function g(e,t){t=t?Object.assign({},Xt,t):Xt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},l=r=>(typeof r=="function"&&(r=r(n.value)),Wn(n,r));return[Vn.bind(n),l]}function br(e,t,n){const l=Zt(e,t,!0,ot);_t(l)}function Y(e,t,n){const l=Zt(e,t,!1,ot);_t(l)}function je(e,t,n){zn=Ar;const l=Zt(e,t,!1,ot);l.user=!0,it?it.push(l):_t(l)}function G(e,t,n){n=n?Object.assign({},Xt,n):Xt;const l=Zt(e,t,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=n.equals||void 0,_t(l),Vn.bind(l)}function $r(e){return e&&typeof e=="object"&&"then"in e}function Gt(e,t,n){let l,r,s;l=!0,r=e,s={};let a=null,i=nn,o=!1,u="initialValue"in s,f=typeof l=="function"&&G(l);const p=new Set,[h,m]=(s.storage||g)(s.initialValue),[w,x]=g(void 0),[v,C]=g(void 0,{equals:!1}),[$,L]=g(u?"ready":"unresolved");function I(E,M,D,q){return a===E&&(a=null,q!==void 0&&(u=!0),(E===i||M===i)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(q,{value:M})),i=nn,b(M,D)),M}function b(E,M){Ke(()=>{M===void 0&&m(()=>E),L(M!==void 0?"errored":u?"ready":"unresolved"),x(M);for(const D of p.keys())D.decrement();p.clear()},!1)}function y(){const E=Cr,M=h(),D=w();if(D!==void 0&&!a)throw D;return ue&&ue.user,M}function _(E=!0){if(E!==!1&&o)return;o=!1;const M=f?f():l;if(M==null||M===!1){I(a,Ne(h));return}const D=i!==nn?i:Ne(()=>r(M,{value:h(),refetching:E}));return $r(D)?(a=D,"value"in D?(D.status==="success"?I(a,D.value,void 0,M):I(a,void 0,cn(D.value),M),D):(o=!0,queueMicrotask(()=>o=!1),Ke(()=>{L(u?"refreshing":"pending"),C()},!1),D.then(q=>I(D,q,void 0,M),q=>I(D,void 0,cn(q),M)))):(I(a,D,void 0,M),D)}return Object.defineProperties(y,{state:{get:()=>$()},error:{get:()=>w()},loading:{get(){const E=$();return E==="pending"||E==="refreshing"}},latest:{get(){if(!u)return y();const E=w();if(E&&!a)throw E;return h()}}}),f?br(()=>_(!1)):_(!1),[y,{refetch:_,mutate:m}]}function _r(e){return Ke(e,!1)}function Ne(e){if(ue===null)return e();const t=ue;ue=null;try{return e()}finally{ue=t}}function hn(e,t,n){const l=Array.isArray(e);let r,s=n&&n.defer;return a=>{let i;if(l){i=Array(e.length);for(let u=0;u<e.length;u++)i[u]=e[u]()}else i=e();if(s)return s=!1,a;const o=Ne(()=>t(i,r,a));return r=i,o}}function Bn(e){je(()=>Ne(e))}function Lt(e){return ie===null||(ie.cleanups===null?ie.cleanups=[e]:ie.cleanups.push(e)),e}function Xn(){return ie}function Yn(e,t){const n=ie,l=ue;ie=e,ue=null;try{return Ke(t,!0)}catch(r){xn(r)}finally{ie=n,ue=l}}function Sr(e){const t=ue,n=ie;return Promise.resolve().then(()=>{ue=t,ie=n;let l;return Ke(e,!1),ue=ie=null,l?l.done:void 0})}const[ho,go]=g(!1);function Un(e,t){const n=Symbol("context");return{id:n,Provider:Er(n),defaultValue:e}}function gn(e){let t;return ie&&ie.context&&(t=ie.context[e.id])!==void 0?t:e.defaultValue}function mn(e){const t=G(e),n=G(()=>un(t()));return n.toArray=()=>{const l=n();return Array.isArray(l)?l:l!=null?[l]:[]},n}let Cr;function Vn(){if(this.sources&&this.state)if(this.state===ot)_t(this);else{const e=Ee;Ee=null,Ke(()=>Vt(this),!1),Ee=e}if(ue){const e=this.observers?this.observers.length:0;ue.sources?(ue.sources.push(this),ue.sourceSlots.push(e)):(ue.sources=[this],ue.sourceSlots=[e]),this.observers?(this.observers.push(ue),this.observerSlots.push(ue.sources.length-1)):(this.observers=[ue],this.observerSlots=[ue.sources.length-1])}return this.value}function Wn(e,t,n){let l=e.value;return(!e.comparator||!e.comparator(l,t))&&(e.value=t,e.observers&&e.observers.length&&Ke(()=>{for(let r=0;r<e.observers.length;r+=1){const s=e.observers[r],a=rn&&rn.running;a&&rn.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Ee.push(s):it.push(s),s.observers&&Gn(s)),a||(s.state=ot)}if(Ee.length>1e6)throw Ee=[],new Error},!1)),t}function _t(e){if(!e.fn)return;Et(e);const t=Ht;kr(e,e.value,t)}function kr(e,t,n){let l;const r=ie,s=ue;ue=ie=e;try{l=e.fn(t)}catch(a){return e.pure&&(e.state=ot,e.owned&&e.owned.forEach(Et),e.owned=null),e.updatedAt=n+1,xn(a)}finally{ue=s,ie=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Wn(e,l):e.value=l,e.updatedAt=n)}function Zt(e,t,n,l=ot,r){const s={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ie,context:ie?ie.context:null,pure:n};return ie===null||ie!==qn&&(ie.owned?ie.owned.push(s):ie.owned=[s]),s}function Ut(e){if(e.state===0)return;if(e.state===Yt)return Vt(e);if(e.suspense&&Ne(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ht);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===ot)_t(e);else if(e.state===Yt){const l=Ee;Ee=null,Ke(()=>Vt(e,t[0]),!1),Ee=l}}function Ke(e,t){if(Ee)return e();let n=!1;t||(Ee=[]),it?n=!0:it=[],Ht++;try{const l=e();return Ir(n),l}catch(l){n||(it=null),Ee=null,xn(l)}}function Ir(e){if(Ee&&(Hn(Ee),Ee=null),e)return;const t=it;it=null,t.length&&Ke(()=>zn(t),!1)}function Hn(e){for(let t=0;t<e.length;t++)Ut(e[t])}function Ar(e){let t,n=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[n++]=l:Ut(l)}for(t=0;t<n;t++)Ut(e[t])}function Vt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const l=e.sources[n];if(l.sources){const r=l.state;r===ot?l!==t&&(!l.updatedAt||l.updatedAt<Ht)&&Ut(l):r===Yt&&Vt(l,t)}}}function Gn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Yt,n.pure?Ee.push(n):it.push(n),n.observers&&Gn(n))}}function Et(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),l=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const s=r.pop(),a=n.observerSlots.pop();l<r.length&&(s.sourceSlots[a]=l,r[l]=s,n.observerSlots[l]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Et(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Et(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function cn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function xn(e,t=ie){throw cn(e)}function un(e){if(typeof e=="function"&&!e.length)return un(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const l=un(e[n]);Array.isArray(l)?t.push.apply(t,l):t.push(l)}return t}return e}function Er(e,t){return function(l){let r;return Y(()=>r=Ne(()=>(ie.context={...ie.context,[e]:l.value},mn(()=>l.children))),void 0),r}}const Pr=Symbol("fallback");function kn(e){for(let t=0;t<e.length;t++)e[t]()}function Mr(e,t,n={}){let l=[],r=[],s=[],a=0,i=t.length>1?[]:null;return Lt(()=>kn(s)),()=>{let o=e()||[],u=o.length,f,p;return o[yr],Ne(()=>{let m,w,x,v,C,$,L,I,b;if(u===0)a!==0&&(kn(s),s=[],l=[],r=[],a=0,i&&(i=[])),n.fallback&&(l=[Pr],r[0]=It(y=>(s[0]=y,n.fallback())),a=1);else if(a===0){for(r=new Array(u),p=0;p<u;p++)l[p]=o[p],r[p]=It(h);a=u}else{for(x=new Array(u),v=new Array(u),i&&(C=new Array(u)),$=0,L=Math.min(a,u);$<L&&l[$]===o[$];$++);for(L=a-1,I=u-1;L>=$&&I>=$&&l[L]===o[I];L--,I--)x[I]=r[L],v[I]=s[L],i&&(C[I]=i[L]);for(m=new Map,w=new Array(I+1),p=I;p>=$;p--)b=o[p],f=m.get(b),w[p]=f===void 0?-1:f,m.set(b,p);for(f=$;f<=L;f++)b=l[f],p=m.get(b),p!==void 0&&p!==-1?(x[p]=r[f],v[p]=s[f],i&&(C[p]=i[f]),p=w[p],m.set(b,p)):s[f]();for(p=$;p<u;p++)p in x?(r[p]=x[p],s[p]=v[p],i&&(i[p]=C[p],i[p](p))):r[p]=It(h);r=r.slice(0,a=u),l=o.slice(0)}return r});function h(m){if(s[p]=m,i){const[w,x]=g(p);return i[p]=x,t(o[p],w)}return t(o[p])}}}function c(e,t){return Ne(()=>e(t||{}))}function Rt(){return!0}const dn={get(e,t,n){return t===Bt?n:e.get(t)},has(e,t){return t===Bt?!0:e.has(t)},set:Rt,deleteProperty:Rt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Rt,deleteProperty:Rt}},ownKeys(e){return e.keys()}};function ln(e){return(e=typeof e=="function"?e():e)?e:{}}function Lr(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function ge(...e){let t=!1;for(let a=0;a<e.length;a++){const i=e[a];t=t||!!i&&Bt in i,e[a]=typeof i=="function"?(t=!0,G(i)):i}if(Rn&&t)return new Proxy({get(a){for(let i=e.length-1;i>=0;i--){const o=ln(e[i])[a];if(o!==void 0)return o}},has(a){for(let i=e.length-1;i>=0;i--)if(a in ln(e[i]))return!0;return!1},keys(){const a=[];for(let i=0;i<e.length;i++)a.push(...Object.keys(ln(e[i])));return[...new Set(a)]}},dn);const n={},l=Object.create(null);for(let a=e.length-1;a>=0;a--){const i=e[a];if(!i)continue;const o=Object.getOwnPropertyNames(i);for(let u=o.length-1;u>=0;u--){const f=o[u];if(f==="__proto__"||f==="constructor")continue;const p=Object.getOwnPropertyDescriptor(i,f);if(!l[f])l[f]=p.get?{enumerable:!0,configurable:!0,get:Lr.bind(n[f]=[p.get.bind(i)])}:p.value!==void 0?p:void 0;else{const h=n[f];h&&(p.get?h.push(p.get.bind(i)):p.value!==void 0&&h.push(()=>p.value))}}}const r={},s=Object.keys(l);for(let a=s.length-1;a>=0;a--){const i=s[a],o=l[i];o&&o.get?Object.defineProperty(r,i,o):r[i]=o?o.value:void 0}return r}function vn(e,...t){if(Rn&&Bt in e){const r=new Set(t.length>1?t.flat():t[0]),s=t.map(a=>new Proxy({get(i){return a.includes(i)?e[i]:void 0},has(i){return a.includes(i)&&i in e},keys(){return a.filter(i=>i in e)}},dn));return s.push(new Proxy({get(a){return r.has(a)?void 0:e[a]},has(a){return r.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!r.has(a))}},dn)),s}const n={},l=t.map(()=>({}));for(const r of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,r),a=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let i=!1,o=0;for(const u of t)u.includes(r)&&(i=!0,a?l[o][r]=s.value:Object.defineProperty(l[o],r,s)),++o;i||(a?n[r]=s.value:Object.defineProperty(n,r,s))}return[...l,n]}const Or=e=>`Stale read from <${e}>.`;function vt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return G(Mr(()=>e.each,e.children,t||void 0))}function te(e){const t=e.keyed,n=G(()=>e.when,void 0,void 0),l=t?n:G(n,void 0,{equals:(r,s)=>!r==!s});return G(()=>{const r=l();if(r){const s=e.children;return typeof s=="function"&&s.length>0?Ne(()=>s(t?r:()=>{if(!Ne(l))throw Or("Show");return n()})):s}return e.fallback},void 0,void 0)}const Nr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Fr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Nr]),jr=new Set(["innerHTML","textContent","innerText","children"]),Dr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Tr=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Rr(e,t){const n=Tr[e];return typeof n=="object"?n[t]?n.$:void 0:n}const zr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),qr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Br={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Xr(e,t,n){let l=n.length,r=t.length,s=l,a=0,i=0,o=t[r-1].nextSibling,u=null;for(;a<r||i<s;){if(t[a]===n[i]){a++,i++;continue}for(;t[r-1]===n[s-1];)r--,s--;if(r===a){const f=s<l?i?n[i-1].nextSibling:n[s-i]:o;for(;i<s;)e.insertBefore(n[i++],f)}else if(s===i)for(;a<r;)(!u||!u.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[i]===t[r-1]){const f=t[--r].nextSibling;e.insertBefore(n[i++],t[a++].nextSibling),e.insertBefore(n[--s],f),t[r]=n[s]}else{if(!u){u=new Map;let p=i;for(;p<s;)u.set(n[p],p++)}const f=u.get(t[a]);if(f!=null)if(i<f&&f<s){let p=a,h=1,m;for(;++p<r&&p<s&&!((m=u.get(t[p]))==null||m!==f+h);)h++;if(h>f-i){const w=t[a];for(;i<f;)e.insertBefore(n[i++],w)}else e.replaceChild(n[i++],t[a++])}else a++;else t[a++].remove()}}}const In="_$DX_DELEGATE";function Yr(e,t,n,l={}){let r;return It(s=>{r=s,t===document?e():d(t,e(),t.firstChild?null:void 0,n)},l.owner),()=>{r(),t.textContent=""}}function S(e,t,n,l){let r;const s=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},a=()=>(r||(r=s())).cloneNode(!0);return a.cloneNode=a,a}function ve(e,t=window.document){const n=t[In]||(t[In]=new Set);for(let l=0,r=e.length;l<r;l++){const s=e[l];n.has(s)||(n.add(s),t.addEventListener(s,Kr))}}function de(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ur(e,t,n,l){l==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,l)}function Vr(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Pe(e,t){t==null?e.removeAttribute("class"):e.className=t}function We(e,t,n,l){if(l)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=s=>r.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Wr(e,t,n={}){const l=Object.keys(t||{}),r=Object.keys(n);let s,a;for(s=0,a=r.length;s<a;s++){const i=r[s];!i||i==="undefined"||t[i]||(An(e,i,!1),delete n[i])}for(s=0,a=l.length;s<a;s++){const i=l[s],o=!!t[i];!i||i==="undefined"||n[i]===o||!o||(An(e,i,!0),n[i]=o)}return n}function Hr(e,t,n){if(!t)return n?de(e,"style"):t;const l=e.style;if(typeof t=="string")return l.cssText=t;typeof n=="string"&&(l.cssText=n=void 0),n||(n={}),t||(t={});let r,s;for(s in n)t[s]==null&&l.removeProperty(s),delete n[s];for(s in t)r=t[s],r!==n[s]&&(l.setProperty(s,r),n[s]=r);return n}function yn(e,t={},n,l){const r={};return l||Y(()=>r.children=Mt(e,t.children,r.children)),Y(()=>typeof t.ref=="function"&&Pt(t.ref,e)),Y(()=>Gr(e,t,n,!0,r,!0)),r}function Pt(e,t,n){return Ne(()=>e(t,n))}function d(e,t,n,l){if(n!==void 0&&!l&&(l=[]),typeof t!="function")return Mt(e,t,l,n);Y(r=>Mt(e,t(),r,n),l)}function Gr(e,t,n,l,r={},s=!1){t||(t={});for(const a in r)if(!(a in t)){if(a==="children")continue;r[a]=En(e,a,null,r[a],n,s,t)}for(const a in t){if(a==="children")continue;const i=t[a];r[a]=En(e,a,i,r[a],n,s,t)}}function Zr(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function An(e,t,n){const l=t.trim().split(/\s+/);for(let r=0,s=l.length;r<s;r++)e.classList.toggle(l[r],n)}function En(e,t,n,l,r,s,a){let i,o,u,f,p;if(t==="style")return Hr(e,n,l);if(t==="classList")return Wr(e,n,l);if(n===l)return l;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);l&&e.removeEventListener(h,l,typeof l!="function"&&l),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);l&&e.removeEventListener(h,l,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),m=zr.has(h);if(!m&&l){const w=Array.isArray(l)?l[0]:l;e.removeEventListener(h,w)}(m||n)&&(We(e,h,n,m),m&&ve([h]))}else if(t.slice(0,5)==="attr:")de(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Vr(e,t.slice(5),n);else if((p=t.slice(0,5)==="prop:")||(u=jr.has(t))||!r&&((f=Rr(t,e.tagName))||(o=Fr.has(t)))||(i=e.nodeName.includes("-")||"is"in a))p&&(t=t.slice(5),o=!0),t==="class"||t==="className"?Pe(e,n):i&&!o&&!u?e[Zr(t)]=n:e[f||t]=n;else{const h=r&&t.indexOf(":")>-1&&Br[t.split(":")[0]];h?Ur(e,h,t,n):de(e,Dr[t]||t,n)}return n}function Kr(e){let t=e.target;const n=`$$${e.type}`,l=e.target,r=e.currentTarget,s=o=>Object.defineProperty(e,"target",{configurable:!0,value:o}),a=()=>{const o=t[n];if(o&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?o.call(t,u,e):o.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},i=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const o=e.composedPath();s(o[0]);for(let u=0;u<o.length-2&&(t=o[u],!!a());u++){if(t._$host){t=t._$host,i();break}if(t.parentNode===r)break}}else i();s(l)}function Mt(e,t,n,l,r){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,a=l!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(a){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=yt(e,n,l,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=yt(e,n,l);else{if(s==="function")return Y(()=>{let i=t();for(;typeof i=="function";)i=i();n=Mt(e,i,n,l)}),()=>n;if(Array.isArray(t)){const i=[],o=n&&Array.isArray(n);if(fn(i,t,n,r))return Y(()=>n=Mt(e,i,n,l,!0)),()=>n;if(i.length===0){if(n=yt(e,n,l),a)return n}else o?n.length===0?Pn(e,i,l):Xr(e,n,i):(n&&yt(e),Pn(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=yt(e,n,l,t);yt(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function fn(e,t,n,l){let r=!1;for(let s=0,a=t.length;s<a;s++){let i=t[s],o=n&&n[e.length],u;if(!(i==null||i===!0||i===!1))if((u=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))r=fn(e,i,o)||r;else if(u==="function")if(l){for(;typeof i=="function";)i=i();r=fn(e,Array.isArray(i)?i:[i],Array.isArray(o)?o:[o])||r}else e.push(i),r=!0;else{const f=String(i);o&&o.nodeType===3&&o.data===f?e.push(o):e.push(document.createTextNode(f))}}return r}function Pn(e,t,n=null){for(let l=0,r=t.length;l<r;l++)e.insertBefore(t[l],n)}function yt(e,t,n,l){if(n===void 0)return e.textContent="";const r=l||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const i=t[a];if(r!==i){const o=i.parentNode===e;!s&&!a?o?e.replaceChild(r,i):e.insertBefore(r,n):o&&i.remove()}else s=!0}}else e.insertBefore(r,n);return[r]}const Jr=!1,Qr="http://www.w3.org/2000/svg";function el(e,t=!1){return t?document.createElementNS(Qr,e):document.createElement(e)}function tl(e,t){const n=G(e);return G(()=>{const l=n();switch(typeof l){case"function":return Ne(()=>l(t));case"string":const r=qr.has(l),s=el(l,r);return yn(s,t,r),s}})}function nl(e){const[,t]=vn(e,["component"]);return tl(()=>e.component,t)}function Zn(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let n=!1;function l(r,s){if(n)return!(n=!1);const a={to:r,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:o=>{o&&(n=!0),i.navigate(r,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:l}}let pn;function wn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),pn=window.history.state._depth}wn();function rl(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function ll(e,t){let n=!1;return()=>{const l=pn;wn();const r=l==null?null:pn-l;if(n){n=!1;return}r&&t(r)?(n=!0,window.history.go(-r)):e()}}const sl=/^(?:[a-z0-9]+:)?\/\//i,al=/^\/+|(\/)\/+$/g,Kn="http://sr";function mt(e,t=!1){const n=e.replace(al,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function zt(e,t,n){if(sl.test(t))return;const l=mt(e),r=n&&mt(n);let s="";return!r||t.startsWith("/")?s=l:r.toLowerCase().indexOf(l.toLowerCase())!==0?s=l+r:s=r,(s||"/")+mt(t,!s)}function il(e,t){if(e==null)throw new Error(t);return e}function ol(e,t){return mt(e).replace(/\/*(\*.*)?$/g,"")+mt(t)}function Jn(e){const t={};return e.searchParams.forEach((n,l)=>{l in t?Array.isArray(t[l])?t[l].push(n):t[l]=[t[l],n]:t[l]=n}),t}function cl(e,t,n){const[l,r]=e.split("/*",2),s=l.split("/").filter(Boolean),a=s.length;return i=>{const o=i.split("/").filter(Boolean),u=o.length-a;if(u<0||u>0&&r===void 0&&!t)return null;const f={path:a?"":"/",params:{}},p=h=>n===void 0?void 0:n[h];for(let h=0;h<a;h++){const m=s[h],w=m[0]===":",x=w?o[h]:o[h].toLowerCase(),v=w?m.slice(1):m.toLowerCase();if(w&&sn(x,p(v)))f.params[v]=x;else if(w||!sn(x,v))return null;f.path+=`/${x}`}if(r){const h=u?o.slice(-u).join("/"):"";if(sn(h,p(r)))f.params[r]=h;else return null}return f}}function sn(e,t){const n=l=>l===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function ul(e){const[t,n]=e.pattern.split("/*",2),l=t.split("/").filter(Boolean);return l.reduce((r,s)=>r+(s.startsWith(":")?2:3),l.length-(n===void 0?0:1))}function Qn(e){const t=new Map,n=Xn();return new Proxy({},{get(l,r){return t.has(r)||Yn(n,()=>t.set(r,G(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function er(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),l=e.slice(t.index+t[0].length);const r=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(l);)r.push(n+=t[1]),l=l.slice(t[0].length);return er(l).reduce((s,a)=>[...s,...r.map(i=>i+a)],[])}const dl=100,tr=Un(),bn=Un(),Ot=()=>il(gn(tr),"<A> and 'use' router primitives can be only used inside a Route."),fl=()=>gn(bn)||Ot().base,pl=e=>{const t=fl();return G(()=>t.resolvePath(e()))},hl=e=>{const t=Ot();return G(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},ye=()=>Ot().navigatorFactory(),gl=()=>Ot().location,ml=()=>Ot().params;function xl(e,t=""){const{component:n,preload:l,load:r,children:s,info:a}=e,i=!s||Array.isArray(s)&&!s.length,o={key:e,component:n,preload:l||r,info:a};return nr(e.path).reduce((u,f)=>{for(const p of er(f)){const h=ol(t,p);let m=i?h:h.split("/*",1)[0];m=m.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),u.push({...o,originalPath:f,pattern:m,matcher:cl(m,!i,e.matchFilters)})}return u},[])}function vl(e,t=0){return{routes:e,score:ul(e[e.length-1])*1e4-t,matcher(n){const l=[];for(let r=e.length-1;r>=0;r--){const s=e[r],a=s.matcher(n);if(!a)return null;l.unshift({...a,route:s})}return l}}}function nr(e){return Array.isArray(e)?e:[e]}function rr(e,t="",n=[],l=[]){const r=nr(e);for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const o=xl(i,t);for(const u of o){n.push(u);const f=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!f)rr(i.children,u.pattern,n,l);else{const p=vl([...n],l.length);l.push(p)}n.pop()}}}return n.length?l:l.sort((s,a)=>a.score-s.score)}function an(e,t){for(let n=0,l=e.length;n<l;n++){const r=e[n].matcher(t);if(r)return r}return[]}function yl(e,t,n){const l=new URL(Kn),r=G(f=>{const p=e();try{return new URL(p,l)}catch{return console.error(`Invalid path ${p}`),f}},l,{equals:(f,p)=>f.href===p.href}),s=G(()=>r().pathname),a=G(()=>r().search,!0),i=G(()=>r().hash),o=()=>"",u=hn(a,()=>Jn(r()));return{get pathname(){return s()},get search(){return a()},get hash(){return i()},get state(){return t()},get key(){return o()},query:n?n(u):Qn(u)}}let gt;function wl(){return gt}function bl(e,t,n,l={}){const{signal:[r,s],utils:a={}}=e,i=a.parsePath||(N=>N),o=a.renderPath||(N=>N),u=a.beforeLeave||Zn(),f=zt("",l.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!r().value&&s({value:f,replace:!0,scroll:!1});const[p,h]=g(!1);let m;const w=(N,R)=>{R.value===x()&&R.state===C()||(m===void 0&&h(!0),gt=N,m=R,Sr(()=>{m===R&&(v(m.value),$(m.state),b[1](K=>K.filter(xe=>xe.pending)))}).finally(()=>{m===R&&_r(()=>{gt=void 0,N==="navigate"&&U(m),h(!1),m=void 0})}))},[x,v]=g(r().value),[C,$]=g(r().state),L=yl(x,C,a.queryWrapper),I=[],b=g([]),y=G(()=>typeof l.transformUrl=="function"?an(t(),l.transformUrl(L.pathname)):an(t(),L.pathname)),_=()=>{const N=y(),R={};for(let K=0;K<N.length;K++)Object.assign(R,N[K].params);return R},E=a.paramsWrapper?a.paramsWrapper(_,t):Qn(_),M={pattern:f,path:()=>f,outlet:()=>null,resolvePath(N){return zt(f,N)}};return Y(hn(r,N=>w("native",N),{defer:!0})),{base:M,location:L,params:E,isRouting:p,renderPath:o,parsePath:i,navigatorFactory:q,matches:y,beforeLeave:u,preloadRoute:re,singleFlight:l.singleFlight===void 0?!0:l.singleFlight,submissions:b};function D(N,R,K){Ne(()=>{if(typeof R=="number"){R&&(a.go?a.go(R):console.warn("Router integration does not support relative routing"));return}const xe=!R||R[0]==="?",{replace:W,resolve:ee,scroll:B,state:le}={replace:!1,resolve:!xe,scroll:!0,...K},Me=ee?N.resolvePath(R):zt(xe&&L.pathname||"",R);if(Me===void 0)throw new Error(`Path '${R}' is not a routable path`);if(I.length>=dl)throw new Error("Too many redirects");const Se=x();(Me!==Se||le!==C())&&(Jr||u.confirm(Me,K)&&(I.push({value:Se,replace:W,scroll:B,state:C()}),w("navigate",{value:Me,state:le})))})}function q(N){return N=N||gn(bn)||M,(R,K)=>D(N,R,K)}function U(N){const R=I[0];R&&(s({...N,replace:R.replace,scroll:R.scroll}),I.length=0)}function re(N,R){const K=an(t(),N.pathname),xe=gt;gt="preload";for(let W in K){const{route:ee,params:B}=K[W];ee.component&&ee.component.preload&&ee.component.preload();const{preload:le}=ee;R&&le&&Yn(n(),()=>le({params:B,location:{pathname:N.pathname,search:N.search,hash:N.hash,query:Jn(N),state:null,key:""},intent:"preload"}))}gt=xe}}function $l(e,t,n,l){const{base:r,location:s,params:a}=e,{pattern:i,component:o,preload:u}=l().route,f=G(()=>l().path);o&&o.preload&&o.preload();const p=u?u({params:a,location:s,intent:gt||"initial"}):void 0;return{parent:t,pattern:i,path:f,outlet:()=>o?c(o,{params:a,location:s,data:p,get children(){return n()}}):n(),resolvePath(m){return zt(r.path(),m,f())}}}const _l=e=>t=>{const{base:n}=t,l=mn(()=>t.children),r=G(()=>rr(l(),t.base||""));let s;const a=bl(e,r,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),c(tr.Provider,{value:a,get children(){return c(Sl,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[G(()=>(s=Xn())&&null),c(Cl,{routerState:a,get branches(){return r()}})]}})}})};function Sl(e){const t=e.routerState.location,n=e.routerState.params,l=G(()=>e.preload&&Ne(()=>{e.preload({params:n,location:t,intent:wl()||"initial"})}));return c(te,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:r=>c(r,{params:n,location:t,get data(){return l()},get children(){return e.children}})})}function Cl(e){const t=[];let n;const l=G(hn(e.routerState.matches,(r,s,a)=>{let i=s&&r.length===s.length;const o=[];for(let u=0,f=r.length;u<f;u++){const p=s&&s[u],h=r[u];a&&p&&h.route.key===p.route.key?o[u]=a[u]:(i=!1,t[u]&&t[u](),It(m=>{t[u]=m,o[u]=$l(e.routerState,o[u-1]||e.routerState.base,Mn(()=>l()[u+1]),()=>e.routerState.matches()[u])}))}return t.splice(r.length).forEach(u=>u()),a&&i?a:(n=o[0],o)}));return Mn(()=>l()&&n)()}const Mn=e=>()=>c(te,{get when(){return e()},keyed:!0,children:t=>c(bn.Provider,{value:t,get children(){return t.outlet()}})}),wt=e=>{const t=mn(()=>e.children);return ge(e,{get children(){return t()}})};function kl([e,t],n,l){return[e,l?r=>t(l(r)):t]}function Il(e){let t=!1;const n=r=>typeof r=="string"?{value:r}:r,l=kl(g(n(e.get()),{equals:(r,s)=>r.value===s.value&&r.state===s.state}),void 0,r=>(!t&&e.set(r),r));return e.init&&Lt(e.init((r=e.get())=>{t=!0,l[1](n(r)),t=!1})),_l({signal:l,create:e.create,utils:e.utils})}function Al(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function El(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Pl=new Map;function Ml(e=!0,t=!1,n="/_server",l){return r=>{const s=r.base.path(),a=r.navigatorFactory(r.base);let i,o;function u(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}function f(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const v=x.composedPath().find(y=>y instanceof Node&&y.nodeName.toUpperCase()==="A");if(!v||t&&!v.hasAttribute("link"))return;const C=u(v),$=C?v.href.baseVal:v.href;if((C?v.target.baseVal:v.target)||!$&&!v.hasAttribute("state"))return;const I=(v.getAttribute("rel")||"").split(/\s+/);if(v.hasAttribute("download")||I&&I.includes("external"))return;const b=C?new URL($,document.baseURI):new URL($);if(!(b.origin!==window.location.origin||s&&b.pathname&&!b.pathname.toLowerCase().startsWith(s.toLowerCase())))return[v,b]}function p(x){const v=f(x);if(!v)return;const[C,$]=v,L=r.parsePath($.pathname+$.search+$.hash),I=C.getAttribute("state");x.preventDefault(),a(L,{resolve:!1,replace:C.hasAttribute("replace"),scroll:!C.hasAttribute("noscroll"),state:I?JSON.parse(I):void 0})}function h(x){const v=f(x);if(!v)return;const[C,$]=v;l&&($.pathname=l($.pathname)),r.preloadRoute($,C.getAttribute("preload")!=="false")}function m(x){clearTimeout(i);const v=f(x);if(!v)return o=null;const[C,$]=v;o!==C&&(l&&($.pathname=l($.pathname)),i=setTimeout(()=>{r.preloadRoute($,C.getAttribute("preload")!=="false"),o=C},20))}function w(x){if(x.defaultPrevented)return;let v=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!v)return;if(!v.startsWith("https://action/")){const $=new URL(v,Kn);if(v=r.parsePath($.pathname+$.search),!v.startsWith(n))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const C=Pl.get(v);if(C){x.preventDefault();const $=new FormData(x.target,x.submitter);C.call({r,f:x.target},x.target.enctype==="multipart/form-data"?$:new URLSearchParams($))}}ve(["click","submit"]),document.addEventListener("click",p),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",h,{passive:!0}),document.addEventListener("touchstart",h,{passive:!0})),document.addEventListener("submit",w),Lt(()=>{document.removeEventListener("click",p),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",w)})}}function Ll(e){const t=()=>{const l=window.location.pathname.replace(/^\/+/,"/")+window.location.search,r=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:l+window.location.hash,state:r}},n=Zn();return Il({get:t,set({value:l,replace:r,scroll:s,state:a}){r?window.history.replaceState(rl(a),"",l):window.history.pushState(a,"",l),El(decodeURIComponent(window.location.hash.slice(1)),s),wn()},init:l=>Al(window,"popstate",ll(l,r=>{if(r&&r<0)return!n.confirm(r);{const s=t();return!n.confirm(s.value,{state:s.state})}})),create:Ml(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:l=>window.history.go(l),beforeLeave:n}})(e)}var Ol=S("<a>");function qt(e){e=ge({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=vn(e,["href","state","class","activeClass","inactiveClass","end"]),n=pl(()=>e.href),l=hl(n),r=gl(),s=G(()=>{const a=n();if(a===void 0)return[!1,!1];const i=mt(a.split(/[?#]/,1)[0]).toLowerCase(),o=decodeURI(mt(r.pathname).toLowerCase());return[e.end?i===o:o.startsWith(i+"/")||o===i,i===o]});return(()=>{var a=Ol();return yn(a,ge(t,{get href(){return l()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),a})()}const lr="/assets/logo-n73H4_4Q.svg",Nl="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.5%203H15.8333C16.2754%203%2016.6993%203.17559%2017.0118%203.48816C17.3244%203.80072%2017.5%204.22464%2017.5%204.66667V16.3333C17.5%2016.7754%2017.3244%2017.1993%2017.0118%2017.5118C16.6993%2017.8244%2016.2754%2018%2015.8333%2018H12.5M8.33333%2014.6667L12.5%2010.5M12.5%2010.5L8.33333%206.33333M12.5%2010.5H2.5'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",we=()=>{const[e,t]=g(null),[n,l]=g(null),[r,s]=g(!0),[a,i]=g(null),[o,u]=g(0);return{fetchData:async(h,m,w)=>{s(!0);try{const x=await fetch(m,w);if(u(x.status),x.ok){const v=await x.json();t(v)}else{if(x.status===401){const C=window.location.pathname+window.location.search;C.startsWith("/login")||localStorage.setItem("loginForward",C),h("/login");return}const v=await x.json();i({statusCode:x.status,errorData:v})}}catch(x){const v={message:x.message||"Network or server error occurred"};i({statusCode:500,errorData:v})}finally{s(!1)}},data:e,loading:r,error:a,statusCode:o,fetchImage:async(h,m,w)=>{s(!0);try{const x=await fetch(m,w);if(u(x.status),x.ok){const v=await x.blob(),C=URL.createObjectURL(v);l(C)}else{if(x.status===401){const C=window.location.pathname+window.location.search;C.startsWith("/login")||localStorage.setItem("loginForward",C),h("/login");return}const v=await x.json();i({statusCode:x.status,errorData:v})}}catch(x){const v={message:x.message||"Network or server error occurred"};i({statusCode:500,errorData:v})}finally{s(!1)}},image:n}};var Fl=S(`<div class="bg-lightgray min-h-screen"><div class="p-25px mb-35px"><div class="flex justify-center"><img class=w-236px alt="Vite logo"></div></div><div class="px-25px flex justify-center"><form class="bg-white w-500px flex flex-col gap-y-25px px-[20px] py-[15px] rounded-20px"><div class="flex flex-col items-center"><h1 class="title text-center">Connexion</h1><p class="w-276px normal text-center opacity-50">Renseignez vos identifiants StructSure pour accéder à l'application.</p></div><div><p class="text-sm text-center text-red"></p></div><div class="flex flex-col gap-y-25px"><div class="flex flex-col gap-[5px] justify-start"><p class="normal opacity-75">Identifiant</p><input id=Login type=text placeholder="votre identifiant"class="w-full py-2 px-4 normal rounded-50px bg-lightgray"></div><div class="flex flex-col gap-[5px] justify-start"><p class="normal opacity-75">Mot de passe</p><input id=Password type=password placeholder=•••••••••••• class="w-full py-2 px-4 normal rounded-50px bg-lightgray"></div></div><div class="flex justify-end"><button type=submit class="bg-black flex justify-between gap-[10px] rounded-50px py-2 px-4"><p class="accent text-white">Se connecter</p><img class=w-20px alt="Login Icon">`);function jl(){const[e,t]=g(""),[n,l]=g(""),[r,s]=g(""),a=ye(),i=f=>{localStorage.setItem("token",f.token),localStorage.setItem("role",f.role),localStorage.setItem("firstName",f.firstName),localStorage.setItem("lastName",f.lastName),localStorage.setItem("login",f.login)},o=async f=>{const p=JSON.stringify({login:e(),password:n()}),h={method:"POST",headers:{"Content-Type":"application/json"},body:p},{fetchData:m,statusCode:w,data:x,error:v}=we();if(await m(a,f,h),w()===200){const C=x();i(C);const $=localStorage.getItem("loginForward");a($??"/")}else w()===404&&s(v().errorData.error)},u=async f=>{f.preventDefault(),await o("/api/login")};return(()=>{var f=Fl(),p=f.firstChild,h=p.firstChild,m=h.firstChild,w=p.nextSibling,x=w.firstChild,v=x.firstChild,C=v.nextSibling,$=C.firstChild,L=C.nextSibling,I=L.firstChild,b=I.firstChild,y=b.nextSibling,_=I.nextSibling,E=_.firstChild,M=E.nextSibling,D=L.nextSibling,q=D.firstChild,U=q.firstChild,re=U.nextSibling;return de(m,"src",lr),x.addEventListener("submit",u),d($,r),y.addEventListener("change",N=>t(N.target.value)),M.addEventListener("change",N=>l(N.target.value)),de(re,"src",Nl),f})()}const Dl="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.5%2018H4.16667C3.72464%2018%203.30072%2017.8244%202.98816%2017.5118C2.67559%2017.1993%202.5%2016.7754%202.5%2016.3333V4.66667C2.5%204.22464%202.67559%203.80072%202.98816%203.48816C3.30072%203.17559%203.72464%203%204.16667%203H7.5M13.3333%2014.6667L17.5%2010.5M17.5%2010.5L13.3333%206.33333M17.5%2010.5H7.5'%20stroke='%23181818'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Tl="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='40'%20height='40'%20rx='20'%20fill='%23F13327'%20fill-opacity='0.25'/%3e%3cpath%20d='M14.1666%2027.5H25.8333M19.6349%2012.7217C19.6709%2012.6563%2019.7238%2012.6018%2019.788%2012.5639C19.8522%2012.526%2019.9254%2012.506%2019.9999%2012.506C20.0745%2012.506%2020.1477%2012.526%2020.2119%2012.5639C20.2761%2012.6018%2020.329%2012.6563%2020.3649%2012.7217L22.8249%2017.3917C22.8836%2017.4998%2022.9655%2017.5936%2023.0647%2017.6663C23.1639%2017.7391%2023.278%2017.7889%2023.3988%2017.8124C23.5196%2017.8358%2023.644%2017.8322%2023.7632%2017.8018C23.8824%2017.7714%2023.9934%2017.715%2024.0883%2017.6367L27.6524%2014.5833C27.7209%2014.5277%2027.8052%2014.4952%2027.8932%2014.4905C27.9813%2014.4858%2028.0686%2014.5092%2028.1425%2014.5573C28.2165%2014.6054%2028.2732%2014.6757%2028.3047%2014.7581C28.3361%2014.8405%2028.3406%2014.9307%2028.3174%2015.0158L25.9558%2023.5542C25.9076%2023.7289%2025.8037%2023.8831%2025.66%2023.9935C25.5162%2024.1039%2025.3404%2024.1644%2025.1591%2024.1658H14.8416C14.6602%2024.1646%2014.4842%2024.1041%2014.3403%2023.9937C14.1963%2023.8834%2014.0924%2023.729%2014.0441%2023.5542L11.6833%2015.0167C11.6602%2014.9315%2011.6646%2014.8413%2011.6961%2014.7589C11.7275%2014.6765%2011.7843%2014.6062%2011.8582%2014.5581C11.9321%2014.51%2012.0194%2014.4866%2012.1075%2014.4913C12.1955%2014.496%2012.2799%2014.5285%2012.3483%2014.5842L15.9116%2017.6375C16.0064%2017.7159%2016.1175%2017.7723%2016.2367%2017.8026C16.3559%2017.833%2016.4803%2017.8366%2016.6011%2017.8132C16.7219%2017.7898%2016.836%2017.7399%2016.9352%2017.6672C17.0344%2017.5944%2017.1163%2017.5006%2017.1749%2017.3925L19.6349%2012.7217Z'%20stroke='%23F13327'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Rl="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='40'%20height='40'%20rx='20'%20fill='%23181818'/%3e%3cpath%20d='M20%2020.8333C22.3012%2020.8333%2024.1667%2018.9679%2024.1667%2016.6667C24.1667%2014.3655%2022.3012%2012.5%2020%2012.5C17.6989%2012.5%2015.8334%2014.3655%2015.8334%2016.6667C15.8334%2018.9679%2017.6989%2020.8333%2020%2020.8333ZM20%2020.8333C21.7682%2020.8333%2023.4638%2021.5357%2024.7141%2022.786C25.9643%2024.0362%2026.6667%2025.7319%2026.6667%2027.5M20%2020.8333C18.2319%2020.8333%2016.5362%2021.5357%2015.286%2022.786C14.0358%2024.0362%2013.3334%2025.7319%2013.3334%2027.5'%20stroke='%23F2F2F4'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var zl=S('<img class=w-236px alt="Application logo">'),Ln=S('<img class="w-10 h-10"alt="Vite logo">'),ql=S('<div class="flex justify-between"><div class="flex gap-x-25px items-center">');function Kt(){return(()=>{var e=ql(),t=e.firstChild;return d(e,c(qt,{href:"/",get children(){var n=zl();return de(n,"src",lr),n}}),t),d(t,(()=>{var n=G(()=>localStorage.getItem("role")==="ADMIN");return()=>n()&&c(qt,{href:"/admin-panel",get children(){var l=Ln();return de(l,"src",Tl),l}})})(),null),d(t,c(qt,{href:"/account",get children(){var n=Ln();return de(n,"src",Rl),n}}),null),e})()}var Bl=S('<div class=p-25px><div class="flex justify-center"><form class="bg-black w-500px rounded-20px flex flex-col gap-y-25px px-5 px-15px"><div class="flex flex-col items-center"><h1 class="title text-center py-0.5 text-white">Bonjour </h1><p class="normal text-white text-center"></p></div><div class="flex justify-center"><button type=submit class="bg-white flex justify-between gap-[10px] rounded-50px pb-2 pt-2 pl-4 pr-4"><p class=accent>Se déconnecter</p><img class=w-20px alt="Login Icon">');function Xl(){const e=ye(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("login")},n=async l=>{l.preventDefault(),t(),e("/login")};return(()=>{var l=Bl(),r=l.firstChild,s=r.firstChild,a=s.firstChild,i=a.firstChild;i.firstChild;var o=i.nextSibling,u=a.nextSibling,f=u.firstChild,p=f.firstChild,h=p.nextSibling;return d(l,c(Kt,{}),r),s.addEventListener("submit",n),d(i,()=>localStorage.getItem("firstName")+" "+localStorage.getItem("lastName"),null),d(o,()=>localStorage.getItem("login")),de(h,"src",Dl),l})()}const Yl="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='40'%20height='40'%20rx='20'%20fill='%23181818'/%3e%3cpath%20d='M14.1667%2020.0001H25.8334M20%2014.1667V25.8334'%20stroke='%23F2F2F4'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";/**
* @license lucide-solid v0.473.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var Ul={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},bt=Ul,Vl=S("<svg>"),Wl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hl=(...e)=>e.filter((t,n,l)=>!!t&&t.trim()!==""&&l.indexOf(t)===n).join(" ").trim(),Gl=e=>{const[t,n]=vn(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var l=Vl();return yn(l,ge(bt,{get width(){return t.size??bt.width},get height(){return t.size??bt.height},get stroke(){return t.color??bt.stroke},get"stroke-width"(){return G(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??bt["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??bt["stroke-width"])},get class(){return Hl("lucide","lucide-icon",t.name!=null?`lucide-${Wl(t==null?void 0:t.name)}`:void 0,t.class!=null?t.class:"")}},n),!0,!0),d(l,c(vt,{get each(){return t.iconNode},children:([r,s])=>c(nl,ge({component:r},s))})),l})()},$e=Gl,Zl=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]],Kl=e=>c($e,ge(e,{name:"ArrowDownNarrowWide",iconNode:Zl})),Jl=Kl,Ql=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],es=e=>c($e,ge(e,{name:"ArrowDownWideNarrow",iconNode:Ql})),ts=es,ns=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],rs=e=>c($e,ge(e,{name:"ArrowUpNarrowWide",iconNode:ns})),ls=rs,ss=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],as=e=>c($e,ge(e,{name:"Check",iconNode:ss})),Nt=as,is=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],os=e=>c($e,ge(e,{name:"ChevronDown",iconNode:is})),St=os,cs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],us=e=>c($e,ge(e,{name:"ChevronLeft",iconNode:cs})),ds=us,fs=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ps=e=>c($e,ge(e,{name:"ChevronRight",iconNode:fs})),sr=ps,hs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gs=e=>c($e,ge(e,{name:"CircleAlert",iconNode:hs})),ar=gs,ms=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],xs=e=>c($e,ge(e,{name:"Dot",iconNode:ms})),$n=xs,vs=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ys=e=>c($e,ge(e,{name:"Download",iconNode:vs})),ws=ys,bs=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],$s=e=>c($e,ge(e,{name:"Filter",iconNode:bs})),_s=$s,Ss=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],Cs=e=>c($e,ge(e,{name:"FolderSync",iconNode:Ss})),ir=Cs,ks=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Is=e=>c($e,ge(e,{name:"Pencil",iconNode:ks})),Jt=Is,As=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Es=e=>c($e,ge(e,{name:"Plus",iconNode:As})),Qt=Es,Ps=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],Ms=e=>c($e,ge(e,{name:"SquareDashed",iconNode:Ps})),Ls=Ms,Os=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ns=e=>c($e,ge(e,{name:"Trash2",iconNode:Os})),Ft=Ns,Fs=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],js=e=>c($e,ge(e,{name:"TriangleAlert",iconNode:Fs})),Ds=js,Ts=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rs=e=>c($e,ge(e,{name:"X",iconNode:Ts})),en=Rs,zs=S('<div class="flex justify-between w-full pl-5"><h1 class=title>Ouvrages</h1><div class="flex gap-x-[10px]"><button class="w-10 h-10 bg-white rounded-[50px] flex items-center justify-center"></button><button class="w-10 h-10 bg-white rounded-[50px] flex items-center justify-center"></button><button class="w-10 h-10 bg-black rounded-[50px] flex items-center justify-center">'),qs=S('<div class="fixed z-50 inset-0 bg-black bg-opacity-50 flex justify-center items-center"><form class="bg-white p-25px rounded-20px w-388px flex flex-col gap-y-15px"><h1 class=title>Ajouter un Ouvrage</h1><p class="text-sm text-red-500"></p><div class="flex flex-col justify-start gap-y-15px"><div class="flex flex-col gap-y-5px"><p class="normal opacity-75">Nom*</p><input id=name type=text placeholder="Ajouter un nom"class="w-full pb-2 pt-2 pl-4 pr-4 normal rounded-10px bg-lightgray h-37px"></div><div class="flex flex-col gap-y-5px"><p class="normal opacity-75">Note</p><input id=note type=text placeholder="Ajouter une note"class="w-full pb-2 pt-2 pl-4 pr-4 normal rounded-10px bg-lightgray h-37px"></div></div><div class="flex justify-end justify-between"><button class="w-161px bg-lightgray rounded-50px pb-2 pt-2 pl-4 pr-4 h-9"><p class=accent>Annuler</p></button><button type=submit class="w-161px bg-black rounded-50px pb-2 pt-2 pl-4 pr-4 h-9"><p class="text-white accent">Créer');function Bs(){const[e,t]=g(!1),n=()=>t(!0),l=()=>t(!1),[r,s]=g(""),[a,i]=g(""),[o,u]=g(""),f=ye(),p=m=>{m.preventDefault(),h("/api/structures")},h=async m=>{const w=localStorage.getItem("token"),x=JSON.stringify({name:a(),note:o()}),v={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:x},{fetchData:C,statusCode:$,errorFetch:L}=we();await C(f,m,v),$()===201?location.reload():s(L())};return(()=>{var m=zs(),w=m.firstChild,x=w.nextSibling,v=x.firstChild,C=v.nextSibling,$=C.nextSibling;return d(v,c(Jl,{})),d(C,c(_s,{})),$.$$click=n,d($,c(Qt,{color:"white"})),d(m,(()=>{var L=G(()=>!!e());return()=>L()&&(()=>{var I=qs(),b=I.firstChild,y=b.firstChild,_=y.nextSibling,E=_.nextSibling,M=E.firstChild,D=M.firstChild,q=D.nextSibling,U=M.nextSibling,re=U.firstChild,N=re.nextSibling,R=E.nextSibling,K=R.firstChild;return b.addEventListener("submit",p),d(_,r),q.addEventListener("change",xe=>i(xe.target.value)),N.addEventListener("change",xe=>u(xe.target.value)),K.$$click=l,I})()})(),null),m})()}ve(["click"]);var Xs=S('<div class="flex flex-col lg:grid 2xl:grid lg:grid-cols-3 2xl:grid-cols-4 rounded-[20px] gap-4">'),Ys=S('<h1 class="normal pl-5">'),Us=S('<div class="flex items-center bg-white 2xl:w-300px px-[20px] py-[15px] rounded-[20px] gap-x-[20px] w-full"><div class="w-7 h-7 flex justify-center items-center"></div><div class="flex flex-col"><h1 class=subtitle></h1><p class="normal opacity-50"> capteurs');function Vs(){const[e,t]=g([]),[n,l]=g(""),{fetchData:r,statusCode:s,data:a,error:i}=we(),o=ye(),u=async(p,h,m,w)=>{const x=localStorage.getItem("token"),v=`${p}?searchByName=${encodeURIComponent(h)}&orderByColumnName=${encodeURIComponent(m)}&orderType=${encodeURIComponent(w)}`,C={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}};if(await r(o,v,C),s()===200){const $=a();t($)}else l(i().errorData.error)};Gt(()=>u("/api/structures","","STATE","DESC"));const f=(p,h)=>{if(h==!0)return c(ir,{color:"#6A6A6A",class:"w-full"});switch(p){case"NOK":return c(Ds,{color:"#F13327",className:"w-full"});case"DEFECTIVE":return c(ar,{color:"#F19327",className:"w-full"});case"OK":return c(Nt,{color:"#25B61F",className:"w-full"});case"UNKNOWN":return c(Ls,{color:"#6A6A6A",className:"w-full"})}};return(()=>{var p=Xs();return d(p,c(te,{get when(){return s()===200},get fallback(){return(()=>{var h=Ys();return d(h,n),h})()},get children(){return c(vt,{get each(){return e()},children:h=>c(qt,{get href(){return`/structures/${h.id}`},get children(){var m=Us(),w=m.firstChild,x=w.nextSibling,v=x.firstChild,C=v.nextSibling,$=C.firstChild;return d(w,()=>f(h.state,h.archived)),d(v,()=>h.name),d(C,()=>h.numberOfSensors,$),m}})})}})),p})()}var Ws=S('<div class="flex flex-col justify-center max-w-[1250px] mx-auto mt-10 gap-y-15px">');function Hs(){return(()=>{var e=Ws();return d(e,c(Bs,{}),null),d(e,c(Vs,{}),null),e})()}var Gs=S('<div class="p-25px bg-lightgray min-h-screen">');function Zs(){return(()=>{var e=Gs();return d(e,c(Kt,{}),null),d(e,c(Hs,{}),null),e})()}var Ks=S('<div class="fixed z-50 inset-0 bg-black bg-opacity-50 flex justify-center items-center"><form class="bg-white p-25px rounded-20px w-388px flex flex-col gap-y-15px"><h1 class=title>Modifier l’ouvrage</h1><p class="text-sm text-red"></p><div class="flex flex-col justify-start gap-y-15px"><div class="flex flex-col gap-y-5px"><p class="normal opacity-75">Nom*</p><input id=name type=text class="w-full pb-2 pt-2 pl-4 pr-4 normal rounded-10px bg-lightgray h-37px"maxlength=64></div><div class="flex flex-col gap-y-5px"><p class="normal opacity-75">Note</p><textarea id=note type=text placeholder="Ajouter une note"class="w-full pb-2 pt-2 pl-4 pr-4 normal rounded-10px bg-lightgray h-20"maxlength=1000></textarea></div></div><div class="flex justify-end justify-between"><button class="w-161px bg-lightgray rounded-50px pb-2 pt-2 pl-4 pr-4 h-9"><p class=accent>Annuler</p></button><button type=submit class="w-161px bg-black rounded-50px pb-2 pt-2 pl-4 pr-4 h-9"><p class="text-white accent">Mettre à jour');function Js(e){const t=ye(),n=async()=>{const f=localStorage.getItem("token"),p=`/api/structures/${e.structureDetails().id}`,h={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({name:a(),note:o()})},{fetchData:m,statusCode:w,error:x}=we();await m(t,p,h),w()===201?(e.closeModal(),e.setStructureDetails({...e.structureDetails(),name:a(),note:o()}),e.setNote(o())):s(x().errorData.error)},l=f=>{f.preventDefault(),a().length>64?s("Le nom d'un ouvrage ne peut pas dépasser 64 caractères"):o().length>1e3?s("La note d'un ouvrage ne peut pas dépasser 1000 caractères"):n()},[r,s]=g(""),[a,i]=g(""),[o,u]=g("");return je(()=>{i(e.structureDetails().name),u(e.structureDetails().note)}),c(te,{get when(){return e.isModalVisible()===!0},get children(){var f=Ks(),p=f.firstChild,h=p.firstChild,m=h.nextSibling,w=m.nextSibling,x=w.firstChild,v=x.firstChild,C=v.nextSibling,$=x.nextSibling,L=$.firstChild,I=L.nextSibling,b=w.nextSibling,y=b.firstChild;return p.addEventListener("submit",l),d(m,r),C.addEventListener("change",_=>i(_.target.value)),I.addEventListener("change",_=>u(_.target.value)),We(y,"click",e.closeModal,!0),Y(()=>C.value=e.structureDetails().name),Y(()=>I.value=e.structureDetails().note),f}})}ve(["click"]);var Qs=S('<button class="bg-white rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),ea=S('<button class="bg-[#F133271A] rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),ta=S('<div class="flex flex-col gap-y-2.5"><p class=title></p><div class="flex gap-x-[10px]"><select class="px-4 py-2 w-full h-10 rounded-[20px] subtitle bg-white"><option value=-1>Aucun Scan Sélectionné</option></select><div class="flex gap-x-[10px]"><button class="bg-white rounded-[50px] h-[40px] w-[40px] flex items-center justify-center"></button><button class="bg-black rounded-[50px] h-[40px] w-[40px] flex items-center justify-center"></button></div></div><div class="flex justify-between px-[10px]"><p class=normal></p><p class="normal opacity-50">'),na=S("<option>");function ra({setTotalItems:e,setSensors:t,setNote:n,selectedPlan:l,setPlanSensors:r,selectedScan:s,setSelectedScan:a,structureDetails:i,setStructureDetails:o}){const[u,f]=g(!1),[p,h]=g(!1),[m,w]=g(""),[x,v]=g(""),C=ye();je(()=>{const b=localStorage.getItem("role");h((b==="ADMIN"||b==="RESPONSABLE")&&s()<=-1)});const $=()=>f(!0),L=()=>f(!1),I=b=>{const y=b.target.value;if(y>-1){const _=i().scans.find(E=>E.id.toString()===y);_&&(w(_.name||""),v(_.date||""),n(_.note||""),a(y),Ti(i().id,y,l(),r,C),$t(i().id,t,e,C,{scanFilter:y}))}else w(""),v(""),n(i().note),a(y),Wt(i().id,r,l(),r),$t(i().id,t,e,C)};return(()=>{var b=ta(),y=b.firstChild,_=y.nextSibling,E=_.firstChild;E.firstChild;var M=E.nextSibling,D=M.firstChild,q=D.nextSibling,U=_.nextSibling,re=U.firstChild,N=re.nextSibling;return d(y,()=>i().name),E.addEventListener("change",I),d(E,c(vt,{get each(){return i().scans},children:R=>(()=>{var K=na();return d(K,()=>R.dataRow),Y(()=>K.value=R.id),K})()}),null),d(M,c(te,{get when(){return p()},get children(){return[(()=>{var R=Qs();return R.$$click=$,d(R,c(Jt,{size:20})),R})(),(()=>{var R=ea();return d(R,c(Ft,{color:"red",size:20})),R})()]}}),D),d(D,c(ws,{size:20})),d(q,c(Qt,{color:"white",size:20})),d(re,m),d(N,x),d(b,c(Js,{setNote:n,setStructureDetails:o,isModalVisible:u,closeModal:L,selectedScan:s,structureDetails:i}),null),b})()}ve(["click"]);var la=S('<div class="flex justify-between items-center mb-4"><h2 class=title></h2><div class="flex items-center space-x-2"><button type=button class="bg-lightgray rounded-[50px] h-[40px] w-[40px] flex items-center justify-center"></button><button type=button class="bg-black rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">');const _n=({onClose:e,onSubmit:t,isSubmitting:n,title:l})=>(()=>{var r=la(),s=r.firstChild,a=s.nextSibling,i=a.firstChild,o=i.nextSibling;return d(s,l),We(i,"click",e,!0),i.disabled=n,d(i,c(en,{class:"w-5 h-5"})),We(o,"click",t,!0),o.disabled=n,d(o,c(Nt,{class:"w-5 h-5 text-white"})),r})();ve(["click"]);var sa=S('<div class="mb-4 text-red normal">');const Sn=({message:e})=>(()=>{var t=sa();return d(t,e),t})();var aa=S('<div><label class="flex flex-col gap-[5px]"><p class="normal opacity-75"></p><input type=text pattern=[a-zA-Z0-9]+ class="w-full px-[16px] py-[8px] bg-lightgray normal text-black rounded-[10px]">');const xt=({label:e,value:t,maxLength:n,onInput:l,placeholder:r})=>(()=>{var s=aa(),a=s.firstChild,i=a.firstChild,o=i.nextSibling;return d(i,e),We(o,"input",l,!0),de(o,"maxlength",n),o.value=t,de(o,"placeholder",r),s})();ve(["input"]);var ia=S('<div class=space-y-2><span class="normal opacity-75">Image*</span><div class="relative w-full h-48 border-2 border-[#F2F2F4] rounded-[10px]">'),oa=S('<div class="h-full w-full flex justify-center items-center">'),ca=S('<img alt="Plan modifié"class="w-full h-full rounded-[10px] object-cover">'),ua=S('<img alt="Plan actuel"class="w-full h-full rounded-[10px] object-cover">'),da=S('<p class="text-center normal text-black opacity-50">Pas d&apos;image sélectionnée'),fa=S('<label class="absolute bottom-4 right-4 bg-lightgray px-4 py-2 rounded-[50px] flex items-center gap-[10px] cursor-pointer transition-colors accent"for=file-input><span>Remplacer</span><input type=file id=file-input accept=image/* class=hidden>');const or=e=>{const[t]=e.imageSignal;return(()=>{var n=ia(),l=n.firstChild,r=l.nextSibling;return d(r,c(pa,{imageData:t,get currentImageUrl(){return e.currentImageUrl}}),null),d(r,c(ha,{get onImageChange(){return e.onImageChange}}),null),n})()},pa=({imageData:e,currentImageUrl:t})=>(()=>{var n=oa();return d(n,(()=>{var l=G(()=>!!e());return()=>l()?(()=>{var r=ca();return Y(()=>de(r,"src",e())),r})():t?(()=>{var r=ua();return de(r,"src",t),r})():da()})()),n})(),ha=({onImageChange:e})=>(()=>{var t=fa(),n=t.firstChild,l=n.nextSibling;return d(t,c(Jt,{class:"w-5 h-5 stroke-[2.5px]"}),l),We(l,"change",e),t})();var ga=S('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-[10px]"><div class="bg-white p-6 rounded-[20px] shadow-lg w-96"><div class=space-y-4>');const ma=({isOpen:e,onClose:t,onSave:n,structureId:l})=>{const[r,s]=g(""),[a,i]=g(""),[o,u]=g(null),[f,p]=g(null),[h,m]=g(""),[w,x]=g(!1),v=ye(),C=I=>{const b=I.target.files[0];if(b){const y=["image/jpeg","image/png"];if(b.size>2097152){m("L'image ne doit pas dépasser 20Mo");return}if(!y.includes(b.type)){m("Le format du fichier doit être JPEG ou PNG");return}p(b);const _=new FileReader;_.onload=()=>{u(_.result),m("")},_.readAsDataURL(b)}},$=async()=>{var q,U;if(m(""),!r().trim()){m("Le nom est requis");return}const I=/^(?:[a-zA-Z0-9_-]+(?:\/[a-zA-Z0-9_-]+)*)?$/;if(a().trim()&&!I.test(a().trim())){m("Le format de la section est invalide");return}if(!f()){m("Une image est requise");return}x(!0),m("");const b=new FormData,y={name:r().trim(),section:a().trim()};b.append("metadata",new Blob([JSON.stringify(y)],{type:"application/json"})),b.append("file",f());const{fetchData:_,data:E,statusCode:M,error:D}=we();if(await _(v,`/api/structures/${l}/plans`,{method:"POST",body:b}),M()===201){const re=E();n({id:re.id,metadata:{name:r(),section:a().trim()}}),L()}else m(((U=(q=D())==null?void 0:q.errorData)==null?void 0:U.error)||"Une erreur est survenue");x(!1)},L=()=>{s(""),i(""),u(null),p(null),m(""),t()};return c(te,{when:e,get children(){var I=ga(),b=I.firstChild,y=b.firstChild;return d(b,c(_n,{title:"Ajouter un Plan",onClose:L,onSubmit:$,get isSubmitting(){return w()}}),y),d(b,c(te,{get when(){return h()},get children(){return c(Sn,{get message(){return h()}})}}),y),d(y,c(xt,{label:"Nom*",get value(){return r()},maxLength:32,onInput:_=>s(_.target.value),placeholder:"Zone 03"}),null),d(y,c(xt,{label:"Section",get value(){return a()},maxLength:128,onInput:_=>i(_.target.value),placeholder:"OA/Aval"}),null),d(y,c(or,{imageSignal:[o,u],onImageChange:C}),null),I}})};var xa=S('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-[10px]"><div class="bg-white p-6 rounded-[20px] shadow-lg w-96"><div class=space-y-4>');const va=({isOpen:e,onClose:t,onSave:n,structureId:l,plan:r})=>{const[s,a]=g(r.name||""),[i,o]=g(r.section||""),[u,f]=g(null),[p,h]=g(null),[m,w]=g(""),[x,v]=g(!1),C=ye(),$=b=>{const y=b.target.files[0];if(y){const _=["image/jpeg","image/png"];if(y.size>2097152){w("L'image ne doit pas dépasser 20Mo");return}if(!_.includes(y.type)){w("Le format du fichier doit être JPEG ou PNG");return}h(y);const E=new FileReader;E.onload=()=>{f(E.result),w("")},E.readAsDataURL(y)}},L=async()=>{var q,U;if(w(""),!s().trim()){w("Le nom est requis");return}const b=/^(?:[a-zA-Z0-9_-]+(?:\/[a-zA-Z0-9_-]+)*)?$/;if(i().trim()&&!b.test(i().trim())){w("Le format de la section est invalide");return}v(!0);const y=new FormData,_={name:s().trim(),section:i().trim()};y.append("metadata",new Blob([JSON.stringify(_)],{type:"application/json"})),p()&&y.append("file",p());const{fetchData:E,statusCode:M,error:D}=we();await E(C,`/api/structures/${l}/plans/${r.id}`,{method:"PUT",body:y}),M()===200?(n({id:r.id,metadata:{name:s(),section:i()}}),I()):w(((U=(q=D())==null?void 0:q.errorData)==null?void 0:U.error)||"Une erreur est survenue"),v(!1)},I=()=>{a(r.name||""),o(r.section||""),f(null),h(null),w(""),t()};return c(te,{when:e,get children(){var b=xa(),y=b.firstChild,_=y.firstChild;return d(y,c(_n,{title:"Edition du Plan",onClose:I,onSubmit:L,get isSubmitting(){return x()}}),_),d(y,c(te,{get when(){return m()},get children(){return c(Sn,{get message(){return m()}})}}),_),d(_,c(xt,{label:"Nom*",get value(){return s()},maxLength:32,onInput:E=>a(E.target.value),placeholder:"Zone 03"}),null),d(_,c(xt,{label:"Section",get value(){return i()},maxLength:128,onInput:E=>o(E.target.value),placeholder:"OA/Aval"}),null),d(_,c(or,{imageSignal:[u,f],onImageChange:$,get currentImageUrl(){return r.imageUrl}}),null),b}})};var ya=S('<div class="bg-white py-[8px] px-[9px] flex items-center gap-x-[10px] rounded-[10px] cursor-pointer hover:bg-gray-50"role=button><div class="w-4 h-4 flex items-center justify-center"></div><p class="subtitle leading-[11px]">'),wa=S('<div><div class="flex items-center gap-x-[10px]"><div class="w-4 h-4 flex items-center justify-center"></div><p class="poppins text-base font-medium leading-[11px]">'),ba=S('<div><div class="flex items-center gap-x-[10px]"><div class="w-4 h-4 flex items-center justify-center"></div><p class="poppins text-base font-medium !leading-[11px]"></p></div><div class="w-5 h-5 flex items-center justify-center invisible group-hover:visible"><button title="Éditer un plan">'),$a=S('<div class="py-[8px] px-[9px] rounded-[10px] flex items-center gap-x-[10px] justify-between"><div class="flex items-center gap-x-[10px]"><div class="w-4 h-4 flex items-center justify-center"></div><p class="poppins text-base font-medium !leading-[11px]"></p></div><div class="w-5 h-5 flex items-center justify-center">'),On=S("<div class=mb-2>"),_a=S('<div class="pl-4 mt-2">'),Sa=S("<div class=space-y-2>");const Ca=e=>(()=>{var t=ya(),n=t.firstChild,l=n.nextSibling;return We(t,"click",e.toggleOpen,!0),d(n,(()=>{var r=G(()=>!!e.isOpen());return()=>r()?c(St,{class:"stroke-[2.5]",size:16}):c(sr,{class:"stroke-[2.5]",size:16})})()),d(l,()=>e.name),t})(),cr=({name:e,selectedPlanId:t,setSelectedPlanId:n,planId:l})=>(()=>{var r=wa(),s=r.firstChild,a=s.firstChild,i=a.nextSibling;return r.$$click=()=>{n(l)},d(a,c($n,{class:"stroke-[5]"})),d(i,e),Y(()=>Pe(r,`px-[8px] py-[9px] rounded-[10px] cursor-pointer flex items-center gap-x-[10px] justify-between hover:bg-[#F2F2F4] ${t()===l?"bg-[#F2F2F4]":""}`)),r})(),ur=({name:e,onEdit:t,planId:n,selectedPlanId:l,setSelectedPlanId:r})=>(()=>{var s=ba(),a=s.firstChild,i=a.firstChild,o=i.nextSibling,u=a.nextSibling,f=u.firstChild;return s.$$click=()=>{r(n)},d(i,c($n,{class:"stroke-[5]",size:16})),d(o,e),f.$$click=p=>{p.stopPropagation(),t(n)},d(f,c(Jt,{size:20})),Y(()=>Pe(s,`py-[8px] px-[9px] rounded-[10px] flex items-center cursor-pointer gap-x-[10px] justify-between hover:bg-gray-100 group ${l()===n?"bg-[#F2F2F4]":""}`)),s})(),dr=({name:e})=>(()=>{var t=$a(),n=t.firstChild,l=n.firstChild,r=l.nextSibling,s=n.nextSibling;return d(l,c($n,{class:"stroke-[5]",size:16})),d(r,e),d(s,c(ir,{size:20})),t})(),ka=e=>{const t={sections:{},rootPlans:[]};return Array.isArray(e)?([...e].sort((l,r)=>{const s=l.section||"",a=r.section||"";return s.localeCompare(a)}).forEach(l=>{const{id:r,name:s,section:a,type:i}=l;if(!a||a.trim()===""){t.rootPlans.push({name:s,id:r,type:i});return}const o=a.split("/");let u=t.sections,f="";o.forEach((p,h)=>{f=f?`${f}/${p}`:p,u[p]||(u[p]={name:p,children:{},type:"section",id:`section-${f}`}),h===o.length-1&&(u[p].children[r]={name:s,id:r,type:i}),u=u[p].children})}),t):(console.warn("Data is not an array:",e),t)},fr=e=>{const[t,n]=g(!1),l=Object.keys(e.children||{}).length>0,r=a=>{a.stopPropagation(),n(!t())};if(e.type==="section")return(()=>{var a=On();return d(a,c(Ca,{get name(){return e.name},isOpen:t,toggleOpen:r}),null),d(a,(()=>{var i=G(()=>!!(l&&t()));return()=>i()&&(()=>{var o=_a();return d(o,()=>Object.entries(e.children).map(([u,f])=>c(fr,{get name(){return f.name},get type(){return f.type},get children(){return f.children},get setSelectedPlanId(){return e.setSelectedPlanId},get selectedPlanId(){return e.selectedPlanId},get onEdit(){return e.onEdit},get planId(){return f.id}}))),o})()})(),null),a})();let s;switch(e.type){case"edit":s=ur;break;case"archived":s=dr;break;default:s=cr}return(()=>{var a=On();return d(a,c(s,{get name(){return e.name},get selectedPlanId(){return e.selectedPlanId},get onEdit(){return e.onEdit},get planId(){return e.planId},get setSelectedPlanId(){return e.setSelectedPlanId}})),a})()},Ia=e=>{let t;switch(e.plan.type){case"edit":t=ur;break;case"archived":t=dr;break;default:t=cr}return c(t,{get name(){return e.plan.name},get selectedPlanId(){return e.selectedPlanId},get setSelectedPlanId(){return e.setSelectedPlanId},get onEdit(){return e.onEdit},get planId(){return e.plan.id}})},Aa=e=>{const[t,n]=g([]),l=()=>(Array.isArray(e.data)&&e.data.length>0&&e.selectedPlanId()==null&&e.setSelectedPlanId(e.data[0].id),Array.isArray(e.data)?e.data:[]);je(()=>{n(l())});const r=()=>{const s=t();return ka(s)};return(()=>{var s=Sa();return d(s,()=>r().rootPlans.map(a=>c(Ia,{plan:a,get selectedPlanId(){return e.selectedPlanId},get onEdit(){return e.onEdit},get setSelectedPlanId(){return e.setSelectedPlanId}})),null),d(s,()=>Object.entries(r().sections).map(([a,i])=>c(fr,{get name(){return i.name},get type(){return i.type},get children(){return i.children},get selectedPlanId(){return e.selectedPlanId},get setSelectedPlanId(){return e.setSelectedPlanId},get onEdit(){return e.onEdit}})),null),s})()};ve(["click"]);var Ea=S('<div class="flex justify-between gap-x-5 itmes-center fixed top-5 left-1/2 transform -translate-x-1/2 bg-red100 border border-red text-red px-4 py-3 rounded"><div class="w-5 h-5"></div><p class="text-red accent">');const Pa=e=>{const[t,n]=g(!1),l=()=>{n(!0),setTimeout(()=>n(!1),3e3)};return[c(te,{get when(){return t()},get children(){var r=Ea(),s=r.firstChild,a=s.nextSibling;return d(s,c(ar,{color:"red"})),d(a,()=>e.message),r}}),G(l)]},Cn=e=>{let t="";switch(e){case"OK":t="bg-[#25B51F] border-[#C8ECC7]";break;case"NOK":t="bg-[#F13327] border-[#FBCCC9]";break;case"UNKNOWN":t="bg-[#6A6A6A] border-[#DADADA]";break;case"DEFECTIVE":t="bg-[#F19327] border-[#FBE4C9]";break}return t};var Ma=S("<div>"),La=S("<canvas>"),Oa=S('<div class="absolute z-20 border-4 border-black w-5 h-5 bg-white rounded-[50px]">'),Na=S('<button class="bg-lightgray rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),Fa=S('<button class="bg-[#F133271A] rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),ja=S('<div class="rounded-[10px] py-[10px] px-[20px] flex flex-col gap-y-[10px]">'),Da=S('<div class="flex flex-col gap-y-[5px]"><p class="normal opacity-50">Capteur</p><div class="bg-lightgray px-[16px] py-[8px] rounded-[20px] flex justify-between items-center"><input type=text class="bg-transparent subtitle w-full"><button class="rounded-[50px] h-[24px] w-[24px] flex items-center justify-center">'),Ta=S('<div><div class="absolute z-10 w-[351px] rounded-tr-[20px] rounded-b-[20px] flex flex-col gap-5 bg-white px-5 py-[15px] shadow-[0_0_100px_0_rgba(151,151,167,0.5)]"><div class="w-full flex justify-between items-center"><h1 class=title></h1><div class="flex gap-x-[10px]">'),Ra=S('<p class="normal cursor-pointer">'),za=S('<div class="w-full h-[1px] bg-lightgray">');function qa(e){const[r,s]=g(""),[a,i]=g(0),[o,u]=g(0),[f,p]=g(0),[h,m]=g(0),[w,x]=g(0),[v,C]=g(0),[$,L]=g(0),[I,b]=g(0),[y,_]=g(0),[E,M]=g(""),[D,q]=g(!1),[U,re]=g(0),[N,R]=g(0),[K,xe]=g(-1),[W,ee]=g(-1),[B,le]=g(null),[Me,Se]=g(0),[Je,Be]=g(0),[me,z]=g(""),[De,Te]=g(!1),[Ce,ze]=g(null),ke=ye(),Qe=()=>{i(0),u(0),p(0),m(0),x(0),q(!1),Te(!1),ne=!1,Ue=!1},Fe=G(()=>e.structureDetails().sensors?e.structureDetails().sensors.filter(k=>{var A;return k.x==null&&k.y==null&((A=k.name)==null?void 0:A.toLowerCase().includes(me().toLowerCase()||""))}):[]),Xe=()=>{if(Ce()){const k={...Ce(),x:U(),y:N()};e.setSensorsDetail(e.structureDetails().sensors.map(A=>A.controlChip===Ce().controlChip&&A.measureChip===Ce().measureChip?{...A,x:parseInt(k.x),y:parseInt(k.y)}:A)),e.setSensors(e.sensors().map(A=>A.controlChip===Ce().controlChip&&A.measureChip===Ce().measureChip?{...A,x:parseInt(k.x),y:parseInt(k.y)}:A)),Wt(e.structureId,e.setPlanSensors,e.selectedPlanId(),ke),ze(null),z(""),q(!1),qe()}},Ye=()=>{if(B()){Wt(e.structureId,e.setPlanSensors,e.selectedPlanId(),ke);const k=e.structureDetails().sensors.map(A=>A.controlChip===B().controlChip&&A.measureChip===B().measureChip?{...A,x:null,y:null}:A);e.setSensorsDetail(k),le(null),z(""),q(!1),qe()}},ct=async(k,A)=>{const{fetchData:j,statusCode:V,error:H}=we(),oe=localStorage.getItem("token"),F=`/api/sensors/${k}/${A}/position/delete`,ae={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe}`}};await j(ke,F,ae),V()===200?Ye():(V()===404||V()===422)&&M(H().errorData.error)},ut=async(k,A,j,V,H,oe)=>{const{fetchData:F,statusCode:ae,error:fe}=we(),he={structureId:k,controlChip:A,measureChip:j,planId:V,x:parseInt(H),y:parseInt(oe)},at="/api/sensors/position",Ze={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)};await F(ke,at,Ze),ae()===200?Xe():(ae()===404||ae()===422)&&M(fe().errorData.error)},pe=new Image;let X,ne=!1,Re=0,Ie=0,dt,et,Ue=!1;const ht=(k,A,j)=>{let V=0,H=0;return k>A?(V=j,H=j/k):(V=j*k,H=j),[V,H]},tt=(k,A,j)=>{const[V,H]=ht(v(),$(),j);return k+A-V/2},nt=(k,A,j)=>{const[V,H]=ht(v(),$(),j);return k+A-H/2},He=k=>ht(v(),$(),k),rt=k=>{let A="",j="";switch(k.state){case"OK":A="#25B61F",j="#25b51f40";break;case"NOK":A="#F13327",j="#f1332740";break;case"DEFECTIVE":A="#F19327",j="#f1932740";break;case"UNKNOWN":A="#6A6A6A",j="#6a6a6a40";break;default:M("L'etat du sensor inconnu");break}return[A,j]},ft=(k,A,j,V,H,oe)=>{const F=r();if(F===null||F==="")return;const ae=(j+H)/pe.width,fe=(V+oe)/pe.height;e.planSensors().forEach(he=>{if(he.x!=null&&he.y!=null){const[at,Ze]=rt(he),pt=k+he.x*ae,Tt=A+he.y*fe;F.beginPath(),F.arc(pt,Tt,8,0,Math.PI*2),F.fillStyle=at,F.fill(),F.beginPath(),F.arc(pt,Tt,10,0,Math.PI*2),F.fillStyle=Ze,F.fill(),F.closePath()}})},qe=()=>{const k=r();if(k===null||k==="")return;const A=pe.width/pe.height,j=X.width/X.height;let V=0,H=0,oe=0,F=0;A>j?(V=X.width,H=X.width/A,oe=0,F=(X.height-H)/2):(V=X.height*A,H=X.height,oe=(X.width-V)/2,F=0),C(A),L(j),m(oe),x(F),k.clearRect(0,0,X.width,X.height);const ae=tt(oe,o(),a()),fe=nt(F,f(),a()),[he,at]=He(a()),Ze=V+he,pt=H+at;b(V),_(H),k.drawImage(pe,ae,fe,Ze,pt),ft(ae,fe,V,H,he,at)},ce=()=>{if(!X||!X.parentElement)return;const k=X.parentElement,A=k.clientWidth,j=k.clientHeight;X.width=A,X.height=j,X.style.width=`${X.width}px`,X.style.height=`${X.height}px`},Ve=()=>{ce(),qe()},Le=()=>{X.addEventListener("wheel",Oe),X.addEventListener("mousedown",be),X.addEventListener("mousemove",Q),X.addEventListener("mouseup",se),X.addEventListener("mouseout",se),X.addEventListener("click",Z),window.addEventListener("resize",Ve),document.addEventListener("click",Dt)},Ct=k=>{pe.src=k,pe.onload=()=>qe()},jt=()=>{Ct(e.plan())};je(()=>{Qe(),jt(),ft()}),Bn(()=>{const k=X.getContext("2d");ce(),s(k),jt(),Le(),qe()});const Dt=k=>{X&&!X.contains(k.target)&&dt&&dt.contains(k.target)},P=(k,A)=>{const j=tt(h(),o(),a()),V=nt(w(),f(),a()),[H,oe]=He(a()),F=(I()+H)/pe.width,ae=(y()+oe)/pe.height,fe=j+k*F,he=V+A*ae;return[fe,he]},O=(k,A)=>e.planSensors().find(j=>{const[V,H]=P(j.x,j.y);return Math.sqrt(Math.pow(k-V,2)+Math.pow(A-H,2))<=10})||null,T=(k,A)=>!(k<0||k>pe.width||A<0||A>pe.height),J=(k,A)=>{const j=tt(h(),o(),a()),V=nt(w(),f(),a()),[H,oe]=He(a()),F=(I()+H)/pe.width,ae=(y()+oe)/pe.height,fe=(k-j)/F,he=(A-V)/ae;return[fe,he]},Z=k=>{if(Ue)return;const A=X.getBoundingClientRect(),j=k.clientX-A.left,V=k.clientY-A.top;Se(j),Be(V);const[H,oe]=J(j,V);if(!T(H,oe)){q(!1);return}const F=O(j,V);F?(le(F),re(F.x),R(F.y)):(le(null),re(H),R(oe)),xe(parseInt(H)),ee(parseInt(oe)),q(!0)},se=()=>{ne=!1},Q=k=>{if(k.preventDefault(),ne){Ue=!0,q(!1);const A=k.clientX-Re,j=k.clientY-Ie,V=tt(h(),A,a()),H=nt(w(),j,a()),[oe,F]=He(a()),ae=I()+oe,fe=y()+F;if(V+ae<10||V>X.width-10||H+fe<10||H>X.height-10)return;u(A),p(j),qe()}},be=k=>{k.preventDefault(),k.button===0&&(ne=!0,Re=k.clientX-o(),Ie=k.clientY-f(),Ue=!1)},_e=(k,A)=>k>5*I()||A>5*y(),Oe=k=>{if(k.preventDefault(),k.ctrlKey){q(!1);const A=k.deltaY,j=Math.max(0,a()+-1*A),V=tt(h(),o(),j),H=nt(w(),f(),j),[oe,F]=He(j),ae=I()+oe,fe=y()+F;if(V+ae<10||V>X.width-10||H+fe<10||H>X.height-10||_e(ae,fe))return;i(j),qe()}};Lt(()=>{X.removeEventListener("wheel",Oe),X.removeEventListener("mousedown",be),X.removeEventListener("mousemove",Q),X.removeEventListener("mouseup",se),X.removeEventListener("mouseout",se),window.removeEventListener("resize",Ve),X.removeEventListener("click",Z),document.removeEventListener("click",Dt)});const Ge=()=>P(U(),N())[0],lt=()=>P(U(),N())[1],st=()=>{const[k,A]=P(U(),N());return k<0||k>X.width||A<0||A>X.height};function Ae(k){return(()=>{var A=Ma();return Y(j=>{var V=`absolute z-20 border-[2px] w-5 h-5 rounded-[50px] ${Cn(k.state)}`,H=`${lt()-10}px`,oe=`${Ge()-10}px`;return V!==j.e&&Pe(A,j.e=V),H!==j.t&&((j.t=H)!=null?A.style.setProperty("top",H):A.style.removeProperty("top")),oe!==j.a&&((j.a=oe)!=null?A.style.setProperty("left",oe):A.style.removeProperty("left")),j},{e:void 0,t:void 0,a:void 0}),A})()}return[c(te,{get when(){return E().length>0},get children(){return c(Pa,{get message(){return E()}})}}),(()=>{var k=La(),A=X;return typeof A=="function"?Pt(A,k):X=k,Y(()=>Pe(k,e.styles===void 0?"w-full bg-white":e.styles)),k})(),c(te,{get when(){return D()&&!st()&&e.interactiveMode===!0},get children(){var k=Ta(),A=k.firstChild,j=A.firstChild,V=j.firstChild,H=V.nextSibling,oe=dt;return typeof oe=="function"?Pt(oe,k):dt=k,d(k,c(te,{get when(){return!B()},get children(){var F=Oa();return Y(ae=>{var fe=`${lt()-10}px`,he=`${Ge()-10}px`;return fe!==ae.e&&((ae.e=fe)!=null?F.style.setProperty("top",fe):F.style.removeProperty("top")),he!==ae.t&&((ae.t=he)!=null?F.style.setProperty("left",he):F.style.removeProperty("left")),ae},{e:void 0,t:void 0}),F}}),A),d(k,c(te,{get when(){return B()},get children(){return c(Ae,{get state(){return B().state}})}}),A),d(V,(()=>{var F=G(()=>B()!=null);return()=>F()?B().name:"Nouveau point"})()),d(H,c(te,{get when(){return!B()},get children(){var F=Na();return F.$$click=()=>{Ce()!=null&&ut(e.structureId,Ce().controlChip,Ce().measureChip,e.selectedPlanId(),U(),N())},d(F,c(Nt,{color:"black","stroke-width":"2.5",width:"20px",height:"20px"})),F}}),null),d(H,c(te,{get when(){return B()},get children(){var F=Fa();return F.$$click=()=>{B()&&ct(B().controlChip,B().measureChip)},d(F,c(Ft,{color:"red","stroke-width":"2.5",width:"20px",height:"20px"})),F}}),null),d(A,c(te,{get when(){return!B()},get children(){var F=Da(),ae=F.firstChild,fe=ae.nextSibling,he=fe.firstChild,at=he.nextSibling;return he.addEventListener("focus",()=>Te(!0)),he.$$input=Ze=>z(Ze.currentTarget.value),at.$$click=()=>Te(!De()),d(at,c(St,{get class(){return`transition-transform ${De()?"rotate-180":""}`},color:"black"})),d(F,c(te,{get when(){return G(()=>!!De())()&&Fe().length>0},get children(){var Ze=ja();return d(Ze,()=>Fe().map((pt,Tt)=>[(()=>{var tn=Ra();return tn.$$click=mr=>{mr.stopImmediatePropagation(),z(pt.name),ze(pt),Te(!1)},d(tn,()=>pt.name),tn})(),c(te,{get when(){return Tt<Fe().length-1},get children(){return za()}})])),Ze}}),null),Y(()=>he.value=me()),F}}),null),Y(F=>{var ae=`${lt()}px`,fe=`${Ge()}px`;return ae!==F.e&&((F.e=ae)!=null?A.style.setProperty("top",ae):A.style.removeProperty("top")),fe!==F.t&&((F.t=fe)!=null?A.style.setProperty("left",fe):A.style.removeProperty("left")),F},{e:void 0,t:void 0}),k}})]}ve(["click","input"]);var Ba=S('<button title="Ajouter un plan"class="bg-white rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),Xa=S('<div class="flex flex-col lg:flex-row rounded-[20px] bg-E9E9EB"><div class="flex flex-col gap-y-[15px] lg:w-[25%] m-5 max-h-[350px] lg:max-h-[436px]"><div class="flex items-center justify-between"><p class=title>Plans</p></div><div class="flex flex-col gap-y-[5px] overflow-y-auto [&amp;::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"></div></div><div class="lg:w-[75%] rounded-[20px] bg-white"><div class="w-full p-[20px]"><div class="w-full relative">');const Ya=async(e,t,n)=>{const l={method:"GET",headers:{"Content-Type":"application/json"}},{fetchImage:r,image:s,statusCode:a}=we();await r(n,`/api/structures/plans/${e()}/image`,l),a()===200&&t(s())};function Ua(e){const t=ye(),[n,l]=g([]),[r,s]=g(!1),[a,i]=g(!1),[o,u]=g(null),[f,p]=g(!1),[h,m]=g(null),w=()=>s(!0),x=()=>s(!1),v=()=>{i(!1),u(null)},C=b=>`/api/structures/plans/${b}/image`;je(()=>{e.selectedPlanId()&&Ya(e.selectedPlanId,m,t)});const $=b=>{const y=n().find(_=>_.id===b);y&&(u({...y,imageUrl:C(y.id)}),i(!0))},L=b=>{const y=localStorage.getItem("role"),_=y==="ADMIN"||y==="RESPONSABLE";l(E=>E.map(M=>M.id===b.id?{...M,name:b.metadata.name,section:b.metadata.section,type:M.archived?"archived":_?"edit":"plan"}:M)),v()},I=b=>{const y={id:b.id,name:b.metadata.name,section:b.metadata.section||"",type:f()?"edit":"plan",archived:!1};l(_=>[..._,y]),x()};return je(()=>{const b=localStorage.getItem("role");if(p(b==="ADMIN"||b==="RESPONSABLE"),e.structureDetails().plans){const y=e.structureDetails().plans.map(_=>_.archived?{..._,type:"archived",section:_.section||""}:{..._,type:f()?"edit":"plan",section:_.section||""});l(y)}}),(()=>{var b=Xa(),y=b.firstChild,_=y.firstChild;_.firstChild;var E=_.nextSibling,M=y.nextSibling,D=M.firstChild,q=D.firstChild;return d(_,c(te,{get when(){return f()},get children(){var U=Ba();return U.$$click=w,d(U,c(Qt,{color:"black"})),U}}),null),d(E,c(Aa,{get data(){return n()},get selectedPlanId(){return e.selectedPlanId},get setSelectedPlanId(){return e.setSelectedPlanId},onEdit:$,onPlanEdit:L,get structureId(){return e.structureId}})),d(y,c(te,{get when(){return r()},get children(){return c(ma,{get isOpen(){return r()},onSave:I,onClose:x,get structureId(){return e.structureId}})}}),null),d(y,c(te,{get when(){return G(()=>!!a())()&&o()},get children(){return c(va,{get isOpen(){return a()},onSave:L,onClose:()=>{i(!1),u(null)},get structureId(){return e.structureId},get plan(){return o()}})}}),null),d(q,c(te,{get when(){return h()!==null},get children(){return c(qa,{get structureId(){return e.structureId},plan:h,interactiveMode:!0,get planSensors(){return e.planSensors},get structureDetails(){return e.structureDetails},get setPlanSensors(){return e.setPlanSensors},get sensors(){return e.sensors},get setSensors(){return e.setSensors},get setSensorsDetail(){return e.setSensorsDetail},get selectedPlanId(){return e.selectedPlanId}})}})),b})()}ve(["click"]);var Va=S('<div class="w-full lg:w-[30%] bg-white rounded-[20px] flex flex-col gap-y-[15px] px-[20px] py-[15px] h-fit"><p class=title>Note</p><div class="rounded-[10px] px-[16px] py-[8px] bg-lightgray"><p class="font-poppins normal font-normal">');function Wa({selectedScan:e,structureDetails:t,note:n}){return(()=>{var l=Va(),r=l.firstChild,s=r.nextSibling,a=s.firstChild;return d(a,n),l})()}var Ha=S('<div class="flex flex-col gap-[5px] w-full"><p class="normal opacity-75"></p><input class="rounded-[50px] px-[16px] py-[8px] w-full bg-lightgray accent"type=text disabled>'),Ga=S('<div><p class="opacity-[75%] font-poppins HeadLineMedium text-[#181818]"></p><input>');const At=({title:e,value:t,editMode:n,type:l,minLength:r,maxLength:s,isRequired:a,setter:i,styles:o,parentStyles:u})=>i===void 0&&l===void 0&&s===void 0&&r===void 0?(()=>{var f=Ha(),p=f.firstChild,h=p.nextSibling;return d(p,e),h.value=t,f})():(()=>{var f=Ga(),p=f.firstChild,h=p.nextSibling;return Pe(f,u===void 0?"flex flex-col gap-[5px] min-w-[270px]":u),d(p,e),h.addEventListener("change",m=>i(m.target.value)),Pe(h,o===void 0?"rounded-[50px] px-[16px] py-[8px] flex gap-[10px]  font-poppins font-[600] text-[14px] leading-[21px] bg-[#F2F2F4] text-[#181818]":o),de(h,"type",l),de(h,"minlength",r),de(h,"maxlength",s),h.required=a,de(h,"lang",l==="date"?"fr-FR":void 0),Y(()=>h.disabled=!n()),Y(()=>h.value=t()),f})(),Nn=e=>/^[A-Za-zÀ-ÿ -]*$/.test(e),pr=e=>/^[A-Za-z0-9_@.-]*$/.test(e),hr=(e,t,n,l,r,s,a,i)=>{const o=[t,e,n,l];i&&o.push(r);const u=Object.values(o).map(x=>x===""?1:0).filter(x=>x!==0),f="Assurez-vous que tous les champs marqués d'un astérisque (*) sont complétés.",p="Le champ mot de passe doit contenir entre 12 et 64 caractères.",h="Le prénom doit contenir uniquement des lettres.",m="Le nom doit contenir uniquement des lettres.",w="Le champ identifiant doit contenir uniquement des lettres, des chiffres, des underscores et des @.";u.length>0?s(f):a(f),r.length!==0&&r.length<12?s(p):a(p),Nn(e)?a(h):s(h),Nn(t)?a(m):s(m),pr(n)?a(w):s(w)};var Za=S('<div class="absolute z-20 border-4 w-5 h-5 rounded-[50px]">'),Ka=S("<canvas>"),Ja=S('<div class="absolute z-20 border-4 border-black w-5 h-5 bg-white rounded-[50px]">'),Qa=S('<div><div class="absolute z-10 w-[351px] h-[275px] rounded-tr-[20px] rounded-b-[20px] flex flex-col gap-5 bg-white px-5 py-[15px] shadow-[0_0_100px_0_rgba(151,151,167,0.5)]"><div class="w-full flex justify-between items-center"><h1 class=title>Ouvrages</h1><div class="flex gap-x-[10px]"><button class="bg-lightgray rounded-[50px] h-[40px] w-[40px] flex items-center justify-center"></button><button class="bg-[#F133271A] rounded-[50px] h-[40px] w-[40px] flex items-center justify-center"></button></div></div><div class="flex flex-col gap-y-[5px]"><p class="normal opacity-50">Capteur</p><div class="bg-lightgray px-[16px] py-[8px] rounded-[20px] flex justify-between items-center"><input type=text class="bg-transparent subtitle w-full"><button class="rounded-[50px] h-[24px] w-[24px] flex items-center justify-center"></button></div><div class="rounded-[10px] py-[10px] px-[20px] flex flex-col gap-y-[10px]"><p class=normal>Capteur PA</p><div class="w-full h-[1px] bg-lightgray"></div><p class=normal>Capteur P8S</p><div class="w-full h-[1px] bg-lightgray"></div><p class=normal>Capteur P8N');function ei(e){const[r,s]=g(""),[a,i]=g(0),[o,u]=g(0),[f,p]=g(0),[h,m]=g(0),[w,x]=g(0),[v,C]=g(0),[$,L]=g(0),[I,b]=g(0),[y,_]=g(0),[E,M]=g(""),[D,q]=g(!1),[U,re]=g(0),[N,R]=g(0),[K,xe]=g(-1),[W,ee]=g(-1),[B,le]=g(null),[Me,Se]=g(0),[Je,Be]=g(0),me=new Image;let z,De=!1,Te=0,Ce=0,ze,ke=!1;const Qe=(P,O,T)=>{let J=0,Z=0;return P>O?(J=T,Z=T/P):(J=T*P,Z=T),[J,Z]},Fe=(P,O,T)=>{const[J,Z]=Qe(v(),$(),T);return P+O-J/2},Xe=(P,O,T)=>{const[J,Z]=Qe(v(),$(),T);return P+O-Z/2},Ye=P=>Qe(v(),$(),P),ct=P=>{let O="",T="";switch(P.state){case"OK":O="#25B61F",T="#25b51f40";break;case"NOK":O="#F13327",T="#f1332740";break;case"DEFECTIVE":O="#F19327",T="#f1932740";break;case"UNKNOWN":O="#6A6A6A",T="#6a6a6a40";break;default:M("L'etat du sensor inconnu");break}return[O,T]},ut=(P,O,T,J,Z,se)=>{const Q=r(),be=(T+Z)/me.width,_e=(J+se)/me.height;e.planSensors.forEach(Oe=>{const[Ge,lt]=ct(Oe),st=P+Oe.x*be,Ae=O+Oe.y*_e;Q.beginPath(),Q.arc(st,Ae,8,0,Math.PI*2),Q.fillStyle=Ge,Q.fill(),Q.beginPath(),Q.arc(st,Ae,10,0,Math.PI*2),Q.fillStyle=lt,Q.fill(),Q.closePath()})},pe=()=>{const P=r(),O=me.width/me.height,T=z.width/z.height;let J=0,Z=0,se=0,Q=0;O>T?(J=z.width,Z=z.width/O,se=0,Q=(z.height-Z)/2):(J=z.height*O,Z=z.height,se=(z.width-J)/2,Q=0),C(O),L(T),m(se),x(Q),P.clearRect(0,0,z.width,z.height);const be=Fe(se,o(),a()),_e=Xe(Q,f(),a()),[Oe,Ge]=Ye(a()),lt=J+Oe,st=Z+Ge;b(J),_(Z),P.drawImage(me,be,_e,lt,st),ut(be,_e,J,Z,Oe,Ge)},X=()=>{if(!z||!z.parentElement)return;const P=z.parentElement,O=P.clientWidth,T=P.clientHeight;z.width=O,z.height=T,z.style.width=`${z.width}px`,z.style.height=`${z.height}px`},ne=()=>{X(),pe()},Re=()=>{z.addEventListener("wheel",Ve),z.addEventListener("mousedown",qe),z.addEventListener("mousemove",ft),z.addEventListener("mouseup",rt),z.addEventListener("mouseout",rt),z.addEventListener("click",He),window.addEventListener("resize",ne),document.addEventListener("click",et)},Ie=P=>{me.src=P,me.onload=()=>pe()},dt=()=>{Ie(e.plan)};Bn(()=>{const P=z.getContext("2d");X(),s(P),dt(),Re(),je(()=>{pe()})});const et=P=>{z&&!z.contains(P.target)&&ze&&!ze.contains(P.target)&&q(!1)},Ue=(P,O)=>{const T=Fe(h(),o(),a()),J=Xe(w(),f(),a()),[Z,se]=Ye(a()),Q=(I()+Z)/me.width,be=(y()+se)/me.height,_e=T+P*Q,Oe=J+O*be;return[_e,Oe]},ht=(P,O)=>e.planSensors.find(T=>{const[J,Z]=Ue(T.x,T.y);return Math.sqrt(Math.pow(P-J,2)+Math.pow(O-Z,2))<=10})||null,tt=(P,O)=>!(P<0||P>me.width||O<0||O>me.height),nt=(P,O)=>{const T=Fe(h(),o(),a()),J=Xe(w(),f(),a()),[Z,se]=Ye(a()),Q=(I()+Z)/me.width,be=(y()+se)/me.height,_e=(P-T)/Q,Oe=(O-J)/be;return[_e,Oe]},He=P=>{if(ke)return;const O=z.getBoundingClientRect(),T=P.clientX-O.left,J=P.clientY-O.top;Se(T),Be(J);const[Z,se]=nt(T,J);if(!tt(Z,se)){q(!1);return}const Q=ht(T,J);Q?(le(Q),re(Q.x),R(Q.y)):(le(null),re(Z),R(se)),xe(Math.round(Z)),ee(Math.round(se)),q(!0)},rt=()=>{De=!1},ft=P=>{if(P.preventDefault(),De){ke=!0,q(!1);const O=P.clientX-Te,T=P.clientY-Ce,J=Fe(h(),O,a()),Z=Xe(w(),T,a()),[se,Q]=Ye(a()),be=I()+se,_e=y()+Q;if(J+be<10||J>z.width-10||Z+_e<10||Z>z.height-10)return;u(O),p(T),pe()}},qe=P=>{P.preventDefault(),P.button===0&&(De=!0,Te=P.clientX-o(),Ce=P.clientY-f(),ke=!1)},ce=(P,O)=>P>5*I()||O>5*y(),Ve=P=>{if(P.preventDefault(),P.ctrlKey){q(!1);const O=P.deltaY,T=Math.max(0,a()+-1*O),J=Fe(h(),o(),T),Z=Xe(w(),f(),T),[se,Q]=Ye(T),be=I()+se,_e=y()+Q;if(J+be<10||J>z.width-10||Z+_e<10||Z>z.height-10||ce(be,_e))return;i(T),pe()}};Lt(()=>{z.removeEventListener("wheel",Ve),z.removeEventListener("mousedown",qe),z.removeEventListener("mousemove",ft),z.removeEventListener("mouseup",rt),z.removeEventListener("mouseout",rt),window.removeEventListener("resize",ne),z.removeEventListener("click",He),document.removeEventListener("click",et)});const Le=()=>Ue(U(),N())[0],Ct=()=>Ue(U(),N())[1],jt=()=>{const[P,O]=Ue(U(),N());return P<0||P>z.width||O<0||O>z.height};function Dt(P){return(()=>{var O=Za();return Y(T=>{var J=`${Ct()-10}px`,Z=`${Le()-10}px`,se=P.colors[0],Q=P.colors[1];return J!==T.e&&((T.e=J)!=null?O.style.setProperty("top",J):O.style.removeProperty("top")),Z!==T.t&&((T.t=Z)!=null?O.style.setProperty("left",Z):O.style.removeProperty("left")),se!==T.a&&((T.a=se)!=null?O.style.setProperty("background-color",se):O.style.removeProperty("background-color")),Q!==T.o&&((T.o=Q)!=null?O.style.setProperty("border-color",Q):O.style.removeProperty("border-color")),T},{e:void 0,t:void 0,a:void 0,o:void 0}),O})()}return[(()=>{var P=Ka(),O=z;return typeof O=="function"?Pt(O,P):z=P,Y(()=>Pe(P,e.styles===void 0?"w-full bg-white":e.styles)),P})(),c(te,{get when(){return D()&&!jt()&&e.interactiveMode===!0},get children(){var P=Qa(),O=P.firstChild,T=O.firstChild,J=T.firstChild,Z=J.nextSibling,se=Z.firstChild,Q=se.nextSibling,be=T.nextSibling,_e=be.firstChild,Oe=_e.nextSibling,Ge=Oe.firstChild,lt=Ge.nextSibling,st=ze;return typeof st=="function"?Pt(st,P):ze=P,d(P,c(te,{get when(){return!B()},get children(){var Ae=Ja();return Y(k=>{var A=`${Ct()-10}px`,j=`${Le()-10}px`;return A!==k.e&&((k.e=A)!=null?Ae.style.setProperty("top",A):Ae.style.removeProperty("top")),j!==k.t&&((k.t=j)!=null?Ae.style.setProperty("left",j):Ae.style.removeProperty("left")),k},{e:void 0,t:void 0}),Ae}}),O),d(P,c(te,{get when(){return B()},get children(){return c(Dt,{get colors(){return ct(B())}})}}),O),d(se,c(Nt,{color:"black","stroke-width":"2.5",width:"20px",height:"20px"})),d(Q,c(Ft,{color:"red","stroke-width":"2.5",width:"20px",height:"20px"})),d(lt,c(St,{color:"black"})),Y(Ae=>{var k=`${Ct()}px`,A=`${Le()}px`;return k!==Ae.e&&((Ae.e=k)!=null?O.style.setProperty("top",k):O.style.removeProperty("top")),A!==Ae.t&&((Ae.t=A)!=null?O.style.setProperty("left",A):O.style.removeProperty("left")),Ae},{e:void 0,t:void 0}),P}})]}const ti="/assets/plan_not_found-CGrYCf1O.png";var ni=S('<button class="bg-black rounded-[50px] h-[40px] w-[40px] flex items-center justify-center">'),ri=S('<div class="flex justify-between rounded-[20px]"><div class="flex flex-wrap justify-center items-center"><div class="w-[39px] h-[39px] flex items-center justify-center"><div></div></div><input class="font-poppins font-[600] max-w-[150px] lg:max-w-[714px] text-[25px] leading-[37.5px] tracking-[0%] text-[#181818]"type=text minlength=1 maxlength=32 required></div><div class="flex flex-wrap gap-[10px]"><button class="flex justify-center items-center w-[40px] h-[40px] sm:w-[40px] sm:h-[40px] rounded-[50px] bg-[#F2F2F4]">'),li=S('<button class="flex justify-center items-center w-[40px] h-[40px] sm:w-[40px] sm:h-[40px] rounded-[50px] bg-[#F2F2F4]">'),si=S('<div class="lg:flex lg:flex-col lg:gap-[10px]"><h1 class="font-poppins font-[600] text-[16px] leading-[24px] tracking-[0%] text-[#181818] pl-1">OA/Zone'),ai=S('<img class="w-full h-[156px] lg:min-w-[549px] lg:min-h-[299px] object-cover"alt="plan not found">'),ii=S('<div class="flex flex-col gap-[5px] lg:gap-[10px] w-full"><p class="opacity-[75%] font-poppins HeadLineMedium text-[#181818]">Note</p><textarea class="rounded-[18px] w-full px-[16px] py-[8px] flex gap-[10px] bg-[#F2F2F4] font-poppins font-[400] text-[14px] leading-[21px] text-[#181818]">'),oi=S('<p class="text-[#F13327] font-poppins HeadLineMedium">'),ci=S('<div class="min-h-[100vh] bg-[#F2F2F403] backdrop-blur-[25px] z-[100] flex items-end justify-center align-middle w-[100vw] fixed top-0 left-0"><div class="max-w-[963px] max-h-[calc(100vh-7rem)] justify-center flex flex-col gap-[25px] w-[100%] rounded-t-[35px] p-[25px] lg:p-[50px] bg-[#FFFFFF] shadow-[0px_4px_100px_0px_rgba(151,151,167,0.50)] mx-auto"><div class="overflow-auto overflow-x-hidden flex flex-col gap-[25px] rounded-[18px]"><div class="lg:flex lg:flex-row lg:gap-[25px] flex flex-col gap-[25px]"></div><div class="lg:flex lg:flex-row lg:gap-[25px] lg:min-w-[863px] lg:min-h-[63px] flex flex-col gap-[25px]">');const ui=({sensorState:e,sensorName:t,closeSensorPanel:n,editMode:l,setEditMode:r,handleSubmit:s,setSensorName:a,validationError:i})=>{const o=()=>{l()&&!s()&&r(!l()),!(l()&&i()!=="")&&r(!l())};return(()=>{var u=ri(),f=u.firstChild,p=f.firstChild,h=p.firstChild,m=p.nextSibling,w=f.nextSibling,x=w.firstChild;return m.addEventListener("change",v=>a(v.target.value)),d(w,c(te,{get when(){return l()},get fallback(){return(()=>{var v=li();return v.$$click=o,d(v,c(Jt,{color:"#181818",size:20,width:16.67,top:1.67,left:1.67,strokeWidth:2})),v})()},get children(){var v=ni();return v.$$click=o,d(v,c(Nt,{class:"w-5 h-5 text-white"})),v}}),x),We(x,"click",n,!0),d(x,c(en,{color:"#181818",size:20,width:16.67,top:1.67,left:1.67,strokeWidth:2})),Y(v=>{var C=`w-[20px] h-[20px] rounded-[50px] border-[3px] ${Cn(e)}`,$=!l();return C!==v.e&&Pe(h,v.e=C),$!==v.t&&(m.disabled=v.t=$),v},{e:void 0,t:void 0}),Y(()=>m.value=t()),u})()},di=({sensorMap:e,selectedPlanId:t,sensorDetails:n,structureId:l})=>{t()===null||t();const{fetchImage:r,image:s,loading:a}=we(),i=localStorage.getItem("token"),o=`/api/structures/plans/${l}/${n.controlChip}/${n.measureChip}/image`,u=ye(),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}};return Gt(async()=>{await r(u,o,f)}),(()=>{var p=si();return p.firstChild,d(p,c(te,{get when(){return G(()=>!a())()&&s()!==null},get fallback(){return(()=>{var h=ai();return de(h,"src",ti),h})()},get children(){return c(ei,{styles:"w-full h-[156px] lg:min-w-[549px] lg:min-h-[299px]",get plan(){return s()},interactiveMode:!1,get planSensors(){return Array.of(n)}})}}),null),p})()},fi=({note:e,setNote:t,editMode:n,minLength:l,maxLength:r,isRequired:s})=>(()=>{var a=ii(),i=a.firstChild,o=i.nextSibling;return o.addEventListener("change",u=>t(u.target.value)),o.required=s,de(o,"minlength",l),de(o,"maxlength",r),Y(()=>o.disabled=!n()),Y(()=>o.value=e()),a})(),pi=({structureId:e,sensors:t,setSensors:n,selectedPlanId:l,sensorDetails:r,closeSensorPanel:s,setTotalItems:a})=>{const[i,o]=g(r.name),[u,f]=g(r.installationDate===null?"":r.installationDate.split("T")[0]),[p,h]=g(r==null?void 0:r.note),[m,w]=g(!1),x=ye(),[v,C]=g(""),$=async()=>{if(i()==="")return C("Le nom du capteur est obligatoire"),!1;if(!pr(i()))return C("Le nom doit contenir uniquement des lettres, des chiffres, des underscores et des @"),!1;if(u()==="")return C("La date d'installation du capteur est obligatoire"),!1;const{fetchData:I,error:b,statusCode:y}=we(),_=localStorage.getItem("token"),E={controlChip:r.controlChip,measureChip:r.measureChip,name:i(),installationDate:u(),note:p()===null?"":p()},M={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(E)};return await I(x,"/api/sensors/edit",M),y()===200?(C(""),$t(e,n,a,x),s(),!0):(C(b().errorData),!1)},L=new Map;return t().forEach(I=>{L.set(I.controlChip,I)}),(()=>{var I=ci(),b=I.firstChild,y=b.firstChild,_=y.firstChild,E=_.nextSibling;return d(b,c(ui,{sensorName:i,get sensorState(){return r.state},closeSensorPanel:s,editMode:m,setEditMode:w,handleSubmit:$,setSensorName:o,validationError:v}),y),d(b,c(te,{get when(){return v()!==""},get children(){var M=oi();return d(M,v),M}}),y),d(_,c(di,{selectedPlanId:l,sensorDetails:r,sensorMap:L,structureId:e}),null),d(_,c(fi,{note:p,setNote:h,editMode:m,minLength:"0",maxLength:"1000",isRequired:!0}),null),d(E,c(At,{title:"Tag témoin",get value(){return r.controlChip}}),null),d(E,c(At,{title:"Tag mesure",get value(){return r.measureChip}}),null),d(E,c(At,{title:"Date d’installation",value:u,editMode:m,type:"date",isRequired:!0,setter:f}),null),I})()};ve(["click"]);var hi=S('<div class="flex flex-col gap-[5px]"><p class="normal opacity-75">Note</p><textarea class="rounded-[10px] w-full px-[16px] py-[8px] flex gap-[10px] bg-lightgray normal resize-none [&amp;::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"maxlength=1000>');const gi=({note:e,onInput:t})=>(()=>{var n=hi(),l=n.firstChild,r=l.nextSibling;return We(r,"input",t,!0),r.value=e,n})();ve(["input"]);var mi=S('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-[10px]"><div class="bg-white p-6 rounded-[20px] shadow-lg w-96"><div class=space-y-4>');const xi=({isOpen:e,onClose:t,onSave:n,structureId:l})=>{const[r,s]=g(""),[a,i]=g(""),[o,u]=g(""),[f,p]=g(""),[h,m]=g(!1),[w,x]=g(""),v=ye(),C=async()=>{var _,E;if(x(""),!r().trim()){x("Le nom est requis");return}if(!a().trim()){x("La puce témoin est requise");return}if(!o().trim()){x("La puce de mesure est requise");return}if(o().trim()===a().trim()){x("Les deux puces ne peuvent pas avoir la même valeur");return}m(!0),x("");const L={structureId:l,name:r().trim(),note:f().trim(),measureChip:o().trim(),controlChip:a().trim()},{fetchData:I,statusCode:b,error:y}=we();await I(v,"/api/sensors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(L)}),b()===201?(n(),$()):x(((E=(_=y())==null?void 0:_.errorData)==null?void 0:E.error)||"Une erreur est survenue"),m(!1)},$=()=>{s(""),i(""),u(""),p(""),x(""),t()};return c(te,{when:e,get children(){var L=mi(),I=L.firstChild,b=I.firstChild;return d(I,c(_n,{title:"Ajouter un Capteur",onClose:$,onSubmit:C,get isSubmitting(){return h()}}),b),d(I,c(te,{get when(){return w()},get children(){return c(Sn,{get message(){return w()}})}}),b),d(b,c(xt,{label:"Nom*",get value(){return r()},maxLength:32,onInput:y=>s(y.target.value),placeholder:"Capteur 42"}),null),d(b,c(xt,{label:"Puce Témoin*",get value(){return a()},maxLength:32,onInput:y=>i(y.target.value),placeholder:"E280 6F12 0000 002 208F FACE"}),null),d(b,c(xt,{label:"Puce Mesure*",get value(){return o()},maxLength:32,onInput:y=>u(y.target.value),placeholder:"E280 6F12 0000 002 208F FACD"}),null),d(b,c(gi,{get note(){return f()},onInput:y=>p(y.target.value)}),null),L}})};var vi=S('<div class="flex flex-col gap-[5px] w-[100%] min-w-[140px]"><p class="font-poppins HeadLineMedium text-[#181818] opacity-[75%]"></p><div class=flex><select name=sort id=sort></select><div class=flex><div class=relative><div class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none">'),yi=S("<option>"),wi=S('<button class="flex rounded-r-[10px] justify-center items-center bg-[#181818] min-w-[56px]">'),bi=S('<div class="flex lg:flex-row lg:justify-evenly lg:items-center justify-between gap-[15px] lg:gap-[20px] min-w-[140px] w-full">'),$i=S('<div class="flex gap-[10px] w-full items-center rounded-[10px] py-[8px] h-fit"><input type=checkbox name=display_sensors_from_selected_image id=displat_sensors_image class="accent-[#181818] min-w-[14px] min-h-[14px] rounded-[3px]"><button class="font-poppins font-[400] text-[14px] leading-[21px] tracking-[0%] opacity-[75%] text-[#181818]">'),_i=S('<div class="flex flex-col rounded-[20px] px-[20px] py-[15px] gap-[20px] bg-[#FFFFFF]"><div class="lg:flex lg:flex-row lg:gap-[20px] flex flex-col gap-[20px]"></div><div class="lg:flex lg:flex-row lg:gap-[20px] flex flex-col gap-[10px] items-end"><div class="flex flex-col w-full">');const gr=({dropDownTitle:e,dropDownValues:t,children:n,styles:l,setter:r})=>(()=>{var s=vi(),a=s.firstChild,i=a.nextSibling,o=i.firstChild,u=o.nextSibling,f=u.firstChild,p=f.firstChild;return d(a,e),o.addEventListener("change",h=>r(h.target.value)),Pe(o,`bg-[#F2F2F4] w-[100%] rounded-l-[10px] px-[16px] py-[8px] appearance-none ${l}`),d(o,c(vt,{each:t,children:h=>(()=>{var m=yi();return m.value=h,d(m,h),m})()})),d(p,c(St,{size:20,strokeWidth:2.2})),d(u,n,null),s})(),Si=({dropDownValues:e,setOrderByColumn:t,orderType:n,setOrderType:l})=>{const r=()=>{l(!n())};return c(gr,{dropDownTitle:"Trier",dropDownValues:e,setter:t,get children(){return(()=>{var s=wi();return s.$$click=r,d(s,(()=>{var a=G(()=>!!n());return()=>a()?c(ls,{color:"white"}):c(ts,{color:"white"})})()),s})()}})},Ci=({startDate:e,setStartDate:t,endDate:n,setEndDate:l})=>(()=>{var r=bi();return d(r,c(At,{title:"Installation du",value:e,editMode:()=>!0,type:"date",isRequired:!0,setter:t,styles:"bg-lightgray rounded-[10px] py-[8px] px-[16px] flex gap-[10px] lg:max-w-[271px] normal",parentStyles:"flex flex-col gap-[5px] min-w-[140px] w-full"}),null),d(r,c(At,{title:"Au",value:n,editMode:()=>!0,type:"date",isRequired:!0,setter:l,styles:"bg-lightgray rounded-[10px] py-[8px] px-[16px] flex gap-[10px] lg:max-w-[271px] normal",parentStyles:"flex flex-col gap-[5px] min-w-[140px] w-full"}),null),r})(),Fn=({description:e,value:t,setter:n})=>(()=>{var l=$i(),r=l.firstChild,s=r.nextSibling;return s.$$click=()=>n(!t()),d(s,e),Y(()=>r.checked=t()),l})(),ki=({selectedScan:e,structureId:t,setSensors:n,limit:l,offset:r,setTotalItems:s})=>{const a={Tout:"Tout",Nom:"NAME",Etat:"STATE","Date d'installation":"INSTALLATION_DATE"},i={Tout:"Tout",OK:"OK",NOK:"NOK",Défaillant:"DEFECTIVE","Non détecté":"UNKNOWN"},[o,u]=g(a.Tout),[f,p]=g(!0),[h,m]=g(!1),[w,x]=g(!1),[v,C]=g(""),[$,L]=g(""),[I,b]=g(i.Tout),y=ye();return je(()=>{$t(t,n,s,y,{orderByColumn:o()!=="Tout"?a[o()]:"STATE",orderType:f()?"ASC":"DESC",limit:l(),offset:r(),...e()>-1&&{scanFilter:e()},...I()!=="Tout"&&{stateFilter:i[I()]},...w()?{archivedFilter:w()}:!1,...v()!==""&&{minInstallationDate:v()},...$()!==""&&{maxInstallationDate:$()}})}),(()=>{var _=_i(),E=_.firstChild,M=E.nextSibling,D=M.firstChild;return d(E,c(Si,{get dropDownValues(){return Object.keys(a)},setOrderByColumn:u,orderType:f,setOrderType:p}),null),d(E,c(Ci,{startDate:v,setStartDate:C,endDate:$,setEndDate:L}),null),d(M,c(gr,{dropDownTitle:"Filtrer",get dropDownValues(){return Object.keys(i)},styles:"rounded-[10px]",setter:b}),D),d(D,c(Fn,{description:"Capteurs du plan sélectionné uniquement",value:h,setter:m}),null),d(D,c(Fn,{description:"Capteurs archivés",value:w,setter:x}),null),_})()};ve(["click"]);var Ii=S('<div class="flex items-center justify-between py-5"><div class="flex flex-1 justify-between sm:hidden"><button class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Précédent</button><button class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Suivant</button></div><div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"><div><p class="text-sm text-gray-700">Affichage des résultats <span class=font-medium></span> à <span class=font-medium></span> sur <span class=font-medium></span></p></div><div><nav aria-label=Pagination class="isolate inline-flex -space-x-px rounded-md shadow-xs bg-[#FFFFFF]"><button class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"><span class=sr-only>Previous</span></button><button class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-[#F2F2F4] ring-inset hover:bg-gray-50 focus:z-20 focus:outline-offset-0"><span class=sr-only>Next'),Ai=S('<span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900">...'),Ei=S("<button>");const Pi=({limit:e,offset:t,totalItems:n,setOffset:l})=>{const r=Math.ceil(n()/e()),[s,a]=g(Math.floor(t()/e())+1),i=()=>{a(Math.floor(t()/e())+1)},o=()=>{t()>0&&(l(t()-e()),i())},u=()=>{t()+e()<n()&&(l(t()+e()),i())},f=h=>{l((h-1)*e()),a(h)},p=()=>{const h=[];if(r<=7)for(let m=1;m<=r;m++)h.push(m);else{h.push(1),s()>3&&h.push("...");for(let m=Math.max(s()-1,2);m<=Math.min(s()+1,r-1);m++)h.push(m);s()<r-2&&h.push("..."),r>1&&h.push(r)}return h};return(()=>{var h=Ii(),m=h.firstChild,w=m.firstChild,x=w.nextSibling,v=m.nextSibling,C=v.firstChild,$=C.firstChild,L=$.firstChild,I=L.nextSibling,b=I.nextSibling,y=b.nextSibling,_=y.nextSibling,E=_.nextSibling,M=C.nextSibling,D=M.firstChild,q=D.firstChild;q.firstChild;var U=q.nextSibling;return U.firstChild,w.$$click=o,x.$$click=u,d(I,()=>t()+1),d(y,()=>Math.min(t()+e(),n())),d(E,n),q.$$click=o,d(q,c(ds,{"aria-hidden":"true",className:"size-5",color:"gray"}),null),d(D,()=>p().map((re,N)=>{if(re==="...")return(()=>{var K=Ai();return de(K,"key",N),K})();const R=re===s();return(()=>{var K=Ei();return K.$$click=()=>f(re),K.className=`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${R?"bg-[#181818] text-white":"text-gray-900 ring-1 ring-[#F2F2F4] ring-inset hover:bg-gray-50"} focus:z-20 focus:outline-offset-0`,de(K,"key",re),d(K,re),K})()}),U),U.$$click=u,d(U,c(sr,{"aria-hidden":"true",className:"size-5",color:"gray"}),null),h})()};ve(["click"]);var Mi=S('<button title="Ajouter un capteur"class="w-10 h-10 rounded-[50px] bg-black flex justify-center items-center">'),Li=S('<div class="w-full flex flex-col gap-y-[15px]"><div class="flex justify-between"><p class=title></p><div class="flex justify-between gap-x-[10px]"></div></div><div class="flex flex-col lg:grid lg:grid-cols-3 rounded-[20px] gap-4"></div>'),Oi=S('<div class="flex justify-between rounded-[50px] px-[25px] py-[10px] bg-white"><button class="flex gap-x-[15px] items-center"><div></div><p class="subtitle text-left w-full"></p></button><button class="w-5 h-5 rounded-[50px] flex justify-center items-center">');function Ni({structureId:e,setSensors:t,selectedScan:n,selectedPlanId:l,sensors:r,totalItems:s,setTotalItems:a}){const[i,o]=g(!1),[u,f]=g({}),[p,h]=g(!1),[m,w]=g(!1),[x,v]=g(30),[C,$]=g(0),L=ye(),I=M=>{f(M),o(!0),document.body.style.overflow="hidden"},b=()=>h(!0),y=()=>h(!1),_=()=>{$t(e,t,a,L,{limit:x(),offset:C()}),y()},E=()=>{f({}),o(!1),document.body.style.overflow="auto"};return je(()=>{w(n()<=-1)}),(()=>{var M=Li(),D=M.firstChild,q=D.firstChild,U=q.nextSibling,re=D.nextSibling;return d(q,()=>n()<=-1?"Capteurs":"Résultats"),d(U,c(te,{get when(){return m()},get children(){var N=Mi();return N.$$click=b,d(N,c(Qt,{size:20,color:"white"})),N}}),null),d(U,c(te,{get when(){return p()},get children(){return c(xi,{get isOpen(){return p()},onClose:y,structureId:e,onSave:_})}}),null),d(M,c(ki,{selectedScan:n,structureId:e,setSensors:t,limit:x,offset:C,setTotalItems:a}),re),d(re,c(vt,{get each(){return r()},children:N=>(()=>{var R=Oi(),K=R.firstChild,xe=K.firstChild,W=xe.nextSibling,ee=K.nextSibling;return K.$$click=()=>I(N),d(W,()=>N.name),d(ee,c(Ft,{size:20})),Y(()=>Pe(xe,`w-[16px] min-w-[16px] h-[16px] rounded-[50px] border-2 ${Cn(N.state)}`)),R})()})),d(M,c(te,{get when(){return s()!==0},get children(){return c(Pi,{limit:x,offset:C,setOffset:$,totalItems:s})}}),null),d(M,(()=>{var N=G(()=>!!i());return()=>N()&&c(pi,{structureId:e,sensors:r,setSensors:t,selectedPlanId:l,get sensorDetails(){return u()},closeSensorPanel:E,setTotalItems:a})})(),null),M})()}ve(["click"]);var Fi=S('<div class="flex lg:flex-row flex-col gap-y-[50px] lg:gap-x-[50px] w-full">');function ji({note:e,structureId:t,setSensors:n,selectedScan:l,selectedPlanId:r,sensors:s,totalItems:a,setTotalItems:i,structureDetails:o}){return(()=>{var u=Fi();return d(u,c(Wa,{note:e,selectedScan:l,structureDetails:o}),null),d(u,c(Ni,{structureId:t,setSensors:n,selectedScan:l,selectedPlanId:r,sensors:s,totalItems:a,setTotalItems:i}),null),u})()}var Di=S('<div class="flex flex-col gap-y-50px max-w-1250px mx-auto w-full">');const Wt=async(e,t,n,l)=>{if(n===null)return;const s={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}},{fetchData:a,statusCode:i,data:o}=we();await a(l,`/api/structures/${e}/plan/${n}/sensors`,s),i()===200&&t(o())},Ti=async(e,t,n,l,r)=>{if(n===null)return;const s={method:"GET",headers:{"Content-Type":"application/json"}},{fetchData:a,statusCode:i,data:o}=we(),u=`/api/structures/${e}/plan/${n}/sensors${t?`?scanId=${t}`:""}`;await a(r,u,s),i()===200&&l(o())},$t=async(e,t,n,l,r={})=>{const s=localStorage.getItem("token"),{fetchData:a,statusCode:i,data:o}=we(),u={orderByColumn:r.orderByColumn||"STATE",orderType:r.orderType||"ASC",limit:r.limit??30,offset:r.offset??0,...(r==null?void 0:r.stateFilter)&&{stateFilter:r.stateFilter},...(r==null?void 0:r.archivedFilter)&&{archivedFilter:r.archivedFilter},...(r==null?void 0:r.scanFilter)&&{scanFilter:r.scanFilter},...(r==null?void 0:r.planFilter)&&{planFilter:r.planFilter},...(r==null?void 0:r.minInstallationDate)&&{minInstallationDate:r.minInstallationDate},...(r==null?void 0:r.maxInstallationDate)&&{maxInstallationDate:r.maxInstallationDate}},f=`/api/structures/${e}/sensors`,p={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(u)};await a(l,f,p),i()===200&&(n(o().sizeOfResult),t(o().sensors))};function Ri(e){const[t,n]=g({}),[l,r]=g({id:null,name:null,note:null,scans:[],plans:[],sensors:[]}),[s,a]=g([]),[i,o]=g(null),[u,f]=g(0),[p,h]=g(-1),m=ye(),[w,x]=g(""),v=async $=>{var E;const I={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}},{fetchData:b,statusCode:y,data:_}=we();await b(m,`/api/structures/${$}`,I),y()===200?(r(_()),x((E=_())==null?void 0:E.note)):y()===422&&m("/")};je(()=>{v(e.structureId),$t(e.structureId,n,f,m),Wt(e.structureId,a,i(),m)});const C=$=>{r(L=>({...L,sensors:$}))};return(()=>{var $=Di();return d($,c(ra,{setTotalItems:f,setSensors:n,setNote:x,selectedPlan:i,setPlanSensors:a,selectedScan:p,setSelectedScan:h,structureDetails:l,setStructureDetails:r}),null),d($,c(Ua,{structureDetails:l,get structureId(){return e.structureId},selectedPlanId:i,setSelectedPlanId:o,planSensors:s,setPlanSensors:a,setSensorsDetail:C,setSensors:n,sensors:t}),null),d($,c(ji,{note:w,structureDetails:l,get structureId(){return e.structureId},setSensors:n,selectedScan:p,selectedPlanId:i,sensors:t,totalItems:u,setTotalItems:f}),null),$})()}var zi=S('<div class="flex flex-col gap-y-35px p-25px min-h-screen bg-lightgray">');function qi(){const e=ml();return(()=>{var t=zi();return d(t,c(Kt,{}),null),d(t,c(Ri,{get structureId(){return e.structureId}}),null),t})()}var Bi=S("<button><p>");const Xi=({toggle:e,structureId:t,structureName:n,isSelected:l})=>{const[r,s]=g(l),a=i=>{i.preventDefault(),s(o=>!o),e(t)};return(()=>{var i=Bi(),o=i.firstChild;return i.$$click=a,d(o,n),Y(u=>{var f=`items-center w-auto sm:w-[auto] rounded-[50px] px-[12px] py-[4px] gap-[8px] ${r()?"bg-black":"bg-lightgray"}`,p=`${r()?"text-white":"text-black"} accent`;return f!==u.e&&Pe(i,u.e=f),p!==u.t&&Pe(o,u.t=p),u},{e:void 0,t:void 0}),i})()};ve(["click"]);var Yi=S('<div class="w-[100%] h-auto flex flex-wrap gap-[10px]">');const Ui=({structures:e,setStructureSelection:t})=>{const n=l=>{t((r=[])=>{const s=r.findIndex(a=>a.structureId===l);if(s!==-1){const a=[...r];return a[s].hasAccess=!a[s].hasAccess,a}return r})};return(()=>{var l=Yi();return d(l,c(te,{get when(){return e()!==void 0},get children(){return c(vt,{get each(){return e()},children:r=>c(Xi,{toggle:n,get structureId(){return r.structureId},get structureName(){return r.structureName},get isSelected(){return r.hasAccess}})})}})),l})()};var Vi=S('<div class="min-h-[100vh] items-center bg-gray-800 bg-opacity-50 backdrop-blur-[10px] shadow-[0px 0px 50px 0px #33333340] z-[100] bg-[#00000040] flex justify-center align-middle w-[100vw] h-[100vh] absolute top-0 left-0 p-[25px]"><div class="max-h-[100%] overflow-y-auto sm:text-start inset-0 relative flex flex-col w-[100%] max-w-[776px] size-fit rounded-[20px] p-[25px] gap-[15px] bg-white shadow-[0px 0px 50px 0px #33333340]"><div class="flex justify-between items-center w-full gap-[10px]"><h1 class=title>Edition de Compte</h1><div class="flex flex-wrap gap-[10px]"><button class="flex justify-center items-center w-[40px] h-[40px] sm:w-[40px] sm:h-[40px] rounded-[50px] bg-[#F133271A]"></button><button class="flex justify-center items-center w-[40px] h-[40px] sm:w-[40px] sm:h-[40px] rounded-[50px] bg-lightgray"></button></div></div><div></div><form action class="flex flex-col gap-5"><div class="flex flex-wrap gap-[15px] lg:gap-[50px] text-black font-poppins"><div class="flex flex-col w-full lg:w-[338px] gap-[15px]"><div class="flex flex-col gap-[5px]"><label for=lastname class="normal opacity-50">Nom*</label><input id=lastname required type=text class="normal bg-lightgray w-full rounded-[10px] py-[8px] px-[16px]"minlength=1 maxlength=64></div><div class="flex flex-col gap-[5px]"><label for=firstname class="normal opacity-50">Prénom*</label><input id=firstname required type=text class="normal bg-lightgray w-full rounded-[10px] py-[8px] px-[16px]"minlength=1 maxlength=64></div><div class="flex flex-col gap-[5px]"><label for=id class="normal opacity-50">Identifiant*</label><input id=id required type=text class="normal bg-lightgray w-full h-[37px] rounded-[10px] py-[8px] px-[16px] opacity-[70%]"minlength=1 maxlength=128 disabled></div></div><div class="flex flex-col w-full lg:w-[338px] gap-[15px]"><div class="flex flex-col gap-[5px]"><label for=password class="normal opacity-50">Mot de passe</label><input id=password required type=password placeholder=******* class="normal bg-lightgray w-full h-[37px] rounded-[10px] py-[8px] px-[16px]"></div><div class="flex flex-col gap-[5px]"><label for=role class="normal opacity-50">Role*</label><div class=relative><select id=role required name=roles class="normal bg-lightgray w-full h-[37px] rounded-[10px] px-[16px] appearance-none"></select><div class="absolute right-4 top-1/2 transform -translate-y-1/2 flex items-center pointer-events-none"></div></div></div><div class="flex flex-col gap-[5px]"><label for=accountState class="normal opacity-50">Etat*</label><div class="flex items-center w-full h-[37px] rounded-[10px] py-[8px] px-[16px] gap-[10px]"><label class="normal flex gap-[10px] select-none"><input id=accountState type=checkbox class="normal bg-lightgray border-2 accent-black">Compte activé</label></div></div></div></div><div class="md:flex md:flex-row-reverse"><button type=submit class="rounded-[50px] px-[16px] py-[8px] bg-lightgray"><p class=accent>Mettre à jour'),jn=S('<p class="text-red normal">'),Wi=S("<option disabled>"),Hi=S("<option>"),Gi=S('<div class="flex flex-col w-[100%] h-auto gap-[5px]"><p class="normal opacity-50">Ouvrages autorisés');const Zi=({fetchUserDetails:e,closeModal:t,userDetails:n})=>{const[l,r]=g(n.firstName),[s,a]=g(n.lastName),[i,o]=g(""),[u,f]=g(n.role),[p,h]=g(n.accountState),[m,w]=g([]),[x,v]=g(""),[C,$]=g([]),L=[],I=n.login,b=ye(),{fetchData:y,data:_,statusCode:E,error:M}=we(),D=["Opérateur","Responsable","Admin"],q=W=>{w(ee=>ee.includes(W)?ee:[...ee,W])},U=W=>{w(ee=>ee.filter(B=>B!==W))};je(()=>{if(L.length===0&&_()!==null)for(const W of _().structureAcessDetailsList)L.push({structureId:W.structureId,structureName:W.structureName,hasAccess:W.hasAccess})});const re=(W,ee,B=(le,Me)=>le===Me)=>{if(W.length!==ee.length)return!1;for(let le=0;le<W.length;le++)if(!B(W[le],ee[le]))return!1;return!0},N=(W,ee)=>{if(typeof W!="object"||typeof ee!="object")return W===ee;if(Object.keys(W).length!==Object.keys(ee).length)return!1;for(const B in W)if(Object.prototype.hasOwnProperty.call(W,B)&&!N(W[B],ee[B]))return!1;return!0};je(()=>{if(L.length===0&&_()!==null)for(const W of _().structureDetailsList)L.push({structureId:W.structureId,structureName:W.structureName,hasAccess:W.hasAccess})});const R=async()=>{const ee={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};await y(b,`/api/accounts/${I}/structures`,ee),E()===200&&$(_().structureAccessDetailsList)},K=async W=>{W.preventDefault(),hr(l(),s(),I,u(),i(),q,U,!1);const ee=localStorage.getItem("token");if(m().length===0){const B=[];if(l()!==n.firstName&&B.push("firstname"),s()!==n.lastName&&B.push("lastname"),u()!==n.role&&B.push("role"),p()!==n.accountState&&B.push("accountState"),i()!==""&&B.push("password"),re(C(),L,N)||B.push("structures"),B.length===0){v(""),t();return}const le={firstname:n.firstName,lastname:n.lastName,login:n.login,role:n.role,password:"",accountState:n.accountState},Me=(Je,Be)=>({method:Je,headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`},body:JSON.stringify(Be)});B.includes("firstname")&&(le.firstname=l()),B.includes("lastname")&&(le.lastname=s()),B.includes("role")&&(le.role=u()),B.includes("password")&&(le.password=i()),B.includes("accountState")&&(le.accountState=p()),B.includes("structures")&&(await y(b,`/api/accounts/${n.login}/access`,Me("POST",{access:C()})),E()===200&&B.pop("structures")),await y(b,"/api/accounts/reset",Me("PUT",le));let Se="";M()!==null&&(Se=M().errorData.error),E()===200?(t(),e(),v("")):(E()===404||E()===422)&&v(Se)}};Gt(()=>R());const xe=async()=>{const W=localStorage.getItem("token");await y(b,`/api/api/accounts/${n.login}/anonymize`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`}}),E()===200&&(e(),t())};return(()=>{var W=Vi(),ee=W.firstChild,B=ee.firstChild,le=B.firstChild,Me=le.nextSibling,Se=Me.firstChild,Je=Se.nextSibling,Be=B.nextSibling,me=Be.nextSibling,z=me.firstChild,De=z.firstChild,Te=De.firstChild,Ce=Te.firstChild,ze=Ce.nextSibling,ke=Te.nextSibling,Qe=ke.firstChild,Fe=Qe.nextSibling,Xe=ke.nextSibling,Ye=Xe.firstChild,ct=Ye.nextSibling,ut=De.nextSibling,pe=ut.firstChild,X=pe.firstChild,ne=X.nextSibling,Re=pe.nextSibling,Ie=Re.firstChild,dt=Ie.nextSibling,et=dt.firstChild,Ue=et.nextSibling,ht=Re.nextSibling,tt=ht.firstChild,nt=tt.nextSibling,He=nt.firstChild,rt=He.firstChild,ft=z.nextSibling,qe=ft.firstChild;return Se.$$click=xe,d(Se,c(Ft,{color:"#f13327",size:20,width:20,top:10,left:10})),We(Je,"click",t,!0),d(Je,c(en,{})),d(Be,()=>m().map(ce=>(()=>{var Ve=jn();return d(Ve,ce),Ve})()),null),d(Be,()=>(()=>{var ce=jn();return d(ce,x),ce})(),null),ze.addEventListener("change",ce=>a(ce.target.value)),Fe.addEventListener("change",ce=>r(ce.target.value)),ct.value=I,ne.addEventListener("change",ce=>o(ce.target.value)),et.addEventListener("change",ce=>f(ce.target.value)),d(et,()=>D.map((ce,Ve)=>ce==="Admin"&&localStorage.getItem("login")!=="StructSureAdmin"?(()=>{var Le=Wi();return de(Le,"key",Ve),Le.value=ce,d(Le,ce),Le})():(()=>{var Le=Hi();return de(Le,"key",Ve),Le.value=ce,d(Le,ce),Le})())),d(Ue,c(St,{size:20,strokeWidth:2.5})),rt.addEventListener("change",ce=>h(ce.target.checked)),d(me,(()=>{var ce=Gi();return ce.firstChild,d(ce,c(Ui,{structures:C,setStructureSelection:$}),null),ce})(),ft),qe.$$click=K,Y(()=>ze.value=s()),Y(()=>Fe.value=l()),Y(()=>ne.value=i()),Y(()=>et.value=u()),Y(()=>rt.checked=p()),W})()};ve(["click"]);var Ki=S('<div><button><div class="flex flex-col text-start w-full sm:w-[200px] md:w-[219px] h-auto"><h2 class=subtitle> </h2><span class="normal opacity-50 -mt-[5px]"></span></div><div><div class="flex items-center"><div><p>');const Ji=({fetchUserDetails:e,firstName:t,lastName:n,login:l,role:r,isEnabled:s})=>{var m,w;const[a,i]=g(!1),o=()=>{localStorage.getItem("login")==="StructSureAdmin"&&l==="StructSureAdmin"||r==="Admin"&&localStorage.getItem("login")!=="StructSureAdmin"||i(!0)},u=()=>{i(!1)},f={Opérateur:{text:"text-[#25B61F] w-[74px] h-auto flex items-center justify-center font-poppins user-role",bg:"bg-[#25B61F1A] py-[2px] px-[10px] w-[94px] h-auto rounded-[20px]"},Admin:{text:"text-[#F13327] w-[48px] h-auto flex items-center justify-center font-poppins user-role",bg:"bg-[#F133271A] py-[2px] px-[10px] w-[68px] h-auto rounded-[20px]"},Responsable:{text:"text-[#F19327] w-[93px] h-auto flex items-center justify-center font-poppins user-role",bg:"bg-[#F193271A] py-[2px] px-[10px] w-[113px] h-auto rounded-[20px]"}},p=((m=f[r])==null?void 0:m.text)||"",h=((w=f[r])==null?void 0:w.bg)||"";return(()=>{var x=Ki(),v=x.firstChild,C=v.firstChild,$=C.firstChild,L=$.firstChild,I=$.nextSibling,b=C.nextSibling,y=b.firstChild,_=y.firstChild,E=_.firstChild;return v.$$click=o,d($,t,L),d($,n,null),d(I,l),Pe(_,`${h}`),Pe(E,`${p}`),d(E,r),d(x,(()=>{var M=G(()=>!!a());return()=>M()&&c(Zi,{fetchUserDetails:e,closeModal:u,userDetails:{firstName:t,lastName:n,login:l,role:r,accountState:s}})})(),null),Y(()=>Pe(v,`${s?"":"opacity-50"}  
                ${r==="Admin"&&localStorage.getItem("login")!=="StructSureAdmin"||l==="StructSureAdmin"&&localStorage.getItem("login")==="StructSureAdmin"?"cursor-not-allowed":""} flex justify-between items-center py-[10px] px-[25px] bg-white rounded-[20px] w-full h-auto`)),x})()};ve(["click"]);var Qi=S('<div class="min-h-[100vh] items-center bg-gray-800 bg-opacity-50 backdrop-blur-[10px] shadow-[0px 0px 50px 0px #33333340] z-[100] bg-[#00000040] flex justify-center align-middle w-[100vw] absolute top-0 left-0 p-[25px]"><div class="max-h-[100%] overflow-y-auto sm:text-start inset-0 relative flex flex-col w-[100%] max-w-[776px] size-fit rounded-[20px] p-[25px] gap-[15px] bg-white shadow-[0px 0px 50px 0px #33333340]"><div class="flex justify-between items-center w-full gap-[10px]"><h1 class="font-poppins text-[20px] sm:text-[20px] font-[600] leading-[30px] sm:leading-[37.5px] tracking-[0%]">Créer un Compte</h1><div class="flex flex-wrap gap-[10px]"><button class="flex justify-center items-center w-[40px] h-[40px] sm:w-[40px] sm:h-[40px] rounded-[50px] normal bg-lightgray"></button></div></div><div></div><form class="flex flex-col gap-5"><div class="flex flex-wrap gap-[15px] lg:gap-[50px] normal"><div class="flex flex-col w-full lg:w-[338px] gap-[15px]"><div class="flex flex-col gap-[5px]"><label for=lastname class="normal opacity-50">Nom*</label><input id=lastname required type=text class="normal bg-lightgray w-full rounded-[10px] py-[8px] px-[16px]"minlength=1 maxlength=64></div><div class="flex flex-col gap-[5px]"><label for=firstname class="normal opacity-50">Prénom*</label><input id=firstname required type=text class="normal bg-lightgray w-full rounded-[10px] py-[8px] px-[16px]"minlength=1 maxlength=64></div><div class="flex flex-col gap-[5px]"><label for=id class="normal opacity-50">Identifiant*</label><input id=id required type=text class="normal bg-lightgray w-full h-[37px] rounded-[10px] py-[8px] px-[16px]"minlength=1 maxlength=128></div></div><div class="flex flex-col w-full lg:w-[338px] gap-[15px]"><div class="flex flex-col gap-[5px]"><label for=password class="normal opacity-50">Mot de passe*</label><input id=password required type=password placeholder=******* class="normal bg-lightgray w-full h-[37px] rounded-[10px] py-[8px] px-[16px]"minlength=12 maxlength=64></div><div class="flex flex-col gap-[5px]"><label for=role class="normal opacity-50">Role*</label><div class=relative><select id=role required name=roles class="normal bg-lightgray w-full h-[37px] rounded-[10px] px-[16px] appearance-none"></select><div class="absolute right-4 top-1/2 transform -translate-y-1/2 flex items-center pointer-events-none"></div></div></div><div class="flex flex-col gap-[5px]"><label for=accountState class="normal opacity-50">Etat*</label><div class="flex items-center w-full h-[37px] rounded-[10px] py-[8px] px-[16px] gap-[10px]"><label class="normal flex gap-[10px] select-none"><input id=accountState type=checkbox class="normal bg-lightgray border-2 accent-black">Compte activé</label></div></div></div></div><div class="md:flex md:flex-row-reverse"><button type=submit class="rounded-[50px] px-[16px] py-[8px] gap-[10px] bg-black"><p class="accent text-white">Créer'),Dn=S('<p class="text-[#F13327] font-poppins normal">'),eo=S("<option disabled>"),to=S("<option>");const no=({closeModal:e})=>{const[t,n]=g(""),[l,r]=g(""),[s,a]=g(""),[i,o]=g(""),[u,f]=g(""),[p,h]=g(!0),[m,w]=g([]),[x,v]=g(""),C=ye(),$=["Opérateur","Responsable","Admin"],L=y=>{w(_=>_.includes(y)?_:[..._,y])},I=y=>{w(_=>_.filter(E=>E!==y))},b=async y=>{y.preventDefault(),hr(t(),l(),s(),u(),i(),L,I,!0);const{fetchData:_,error:E,statusCode:M}=we(),D=localStorage.getItem("token");if(m().length===0){const q={firstname:t(),lastname:l(),login:s(),role:u(),password:i()},U={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify(q)};await _(C,"/api/accounts",U);let re="";E()!==null&&(re=E().errorData.error),M()===201?(e(),v("")):M()===422&&v(re)}};return(()=>{var y=Qi(),_=y.firstChild,E=_.firstChild,M=E.firstChild,D=M.nextSibling,q=D.firstChild,U=E.nextSibling,re=U.nextSibling,N=re.firstChild,R=N.firstChild,K=R.firstChild,xe=K.firstChild,W=xe.nextSibling,ee=K.nextSibling,B=ee.firstChild,le=B.nextSibling,Me=ee.nextSibling,Se=Me.firstChild,Je=Se.nextSibling,Be=R.nextSibling,me=Be.firstChild,z=me.firstChild,De=z.nextSibling,Te=me.nextSibling,Ce=Te.firstChild,ze=Ce.nextSibling,ke=ze.firstChild,Qe=ke.nextSibling,Fe=Te.nextSibling,Xe=Fe.firstChild,Ye=Xe.nextSibling,ct=Ye.firstChild,ut=ct.firstChild,pe=N.nextSibling,X=pe.firstChild;return We(q,"click",e,!0),d(q,c(en,{})),d(U,()=>m().map(ne=>(()=>{var Re=Dn();return d(Re,ne),Re})()),null),d(U,()=>(()=>{var ne=Dn();return d(ne,x),ne})(),null),W.addEventListener("change",ne=>r(ne.target.value)),le.addEventListener("change",ne=>n(ne.target.value)),Je.addEventListener("change",ne=>a(ne.target.value)),De.addEventListener("change",ne=>o(ne.target.value)),ke.addEventListener("change",ne=>f(ne.target.value)),d(ke,()=>$.map((ne,Re)=>ne==="Admin"&&localStorage.getItem("login")!=="StructSureAdmin"?(()=>{var Ie=eo();return de(Ie,"key",Re),Ie.value=ne,d(Ie,ne),Ie})():(()=>{var Ie=to();return de(Ie,"key",Re),Ie.value=ne,d(Ie,ne),Ie})())),d(Qe,c(St,{size:20,strokeWidth:2.5})),ut.addEventListener("change",ne=>h(ne.target.checked)),X.$$click=b,Y(()=>W.value=l()),Y(()=>le.value=t()),Y(()=>Je.value=s()),Y(()=>De.value=i()),Y(()=>ke.value=u()),Y(()=>ut.checked=p()),y})()};ve(["click"]);var ro=S('<button class="flex justify-between items-center w-full max-w-[1250px] h-[40px] sm:h-[50px] rounded-[20px] pl-[20px] gap-[10px]"><h1 class=title>Comptes</h1><div><img alt="Add Button logo"class="cursor-pointer w-[40px] h-auto rounded-[50px]">'),lo=S('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:px-4 lg:px-10">');const so=()=>{const[e,t]=g([]),[n,l]=g(!1),r=ye(),s=()=>{l(!0)},a=()=>{l(!1),i()},i=async()=>{const u={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}},{fetchData:f,data:p,statusCode:h}=we();await f(r,"/api/accounts",u),h()===200?t(p()):h()===422&&r("/")};return Gt(()=>i()),[(()=>{var o=ro(),u=o.firstChild,f=u.nextSibling,p=f.firstChild;return o.$$click=s,de(p,"src",Yl),o})(),(()=>{var o=lo();return d(o,c(vt,{get each(){return e()},children:u=>c(Ji,{fetchUserDetails:i,get firstName(){return u.firstName},get lastName(){return u.lastName},get login(){return u.login},get role(){return u.role},get isEnabled(){return u.enabled}})})),o})(),G(()=>G(()=>!!n())()&&c(no,{closeModal:a}))]};ve(["click"]);var ao=S('<div class="flex flex-wrap sm:flex-nowrap items-center w-full max-w-[1250px] h-auto mx-auto"><div class="w-[169px] h-auto px-[15px] gap-[10px] opacity-[50%]"><p class="normal opacity-50"> - </p></div><div class="flex w-[1081px] min-w-min-[378px] rounded-[10px] py-[5px] px-[15px] bg-white"><p class="items-center normal">');const on=({date:e,time:t,logMessage:n})=>(()=>{var l=ao(),r=l.firstChild,s=r.firstChild,a=s.firstChild,i=r.nextSibling,o=i.firstChild;return d(s,e,a),d(s,t,null),d(o,n),l})();var io=S('<div class="max-w-[1250px] w-full h-auto rounded-[20px] pt-[25px] pl-[20px] gap-[10px]"><h1 class=title>Logs'),oo=S('<div class="flex flex-col max-w-[1250px] w-full h-auto gap-[10px] mx-auto">');const co=()=>[io(),(()=>{var e=oo();return d(e,c(on,{date:"13/11/2024",time:"13h56",logMessage:"Ouvrage supprimé : Pont de Gisclard"}),null),d(e,c(on,{date:"12/11/2024",time:"13h00",logMessage:"Ouvrage supprimé : Pont de test1"}),null),d(e,c(on,{date:"10/11/2024",time:"11h00",logMessage:"Ouvrage supprimé : Pont de test"}),null),e})()];var uo=S('<div class="bg-lightgray min-h-screen p-[25px]"><div class="pt-[3%] flex flex-col gap-[15px] sm:mx-auto lg:max-w-[1250px] h-auto">');const Tn=()=>(()=>{var e=uo(),t=e.firstChild;return d(e,c(Kt,{}),t),d(t,c(so,{}),null),d(t,c(co,{}),null),e})();function kt(e){return()=>{const t=ye();return je(()=>{if(!localStorage.getItem("token")){const l=window.location.pathname+window.location.search;l.startsWith("/login")||localStorage.setItem("loginForward",l),t("/login",{replace:!0})}}),c(e,{})}}function fo(){return c(Ll,{get children(){return[c(wt,{path:"/",get component(){return kt(Zs)}}),c(wt,{path:"/login",component:jl}),c(wt,{path:"/account",get component(){return kt(Xl)}}),c(wt,{path:"/admin-panel",get component(){return kt(Tn)}}),c(wt,{path:"/structures/:structureId",get component(){return kt(qi)}}),c(wt,{path:"/admin-panel",get component(){return kt(Tn)}})]}})}const po=document.getElementById("root");Yr(()=>c(fo,{}),po);
